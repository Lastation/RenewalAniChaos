import Function as f;

function ShapeA(cp, x, y);
function ShapeB(cp, x, y);
function ShapeC(cp);

function main(cp)
{
	f.BanReturn(cp);
	f.HoldPosition(cp);
	
	if (f.delay[cp] == 0)
	{
		MoveUnit(All, "50 + 1n Battlecruiser", cp, "Anywhere", "[Skill]HoldPosition");
		
		if(f.count[cp] == 0)
		{
			if (f.loop[cp] == 0) 		{ ShapeA(cp, -160, 0); }
			else if (f.loop[cp] == 1) 	{ ShapeA(cp, 0, -160); }
			else if (f.loop[cp] == 2) 	{ ShapeA(cp, 160, 0); }
			else if (f.loop[cp] == 3) 	{ ShapeA(cp, 0, 160); }
			else if (f.loop[cp] == 4) 	{ f.loop[cp] = 0; f.count[cp] += 1; }
		}
		else if (f.count[cp] == 1)
		{
			if (f.loop[cp] == 0) 		{ ShapeB(cp, -160, 0); }
			else if (f.loop[cp] == 1) 	{ ShapeB(cp, 0, -160); }
			else if (f.loop[cp] == 2) 	{ ShapeB(cp, 160, 0); }
			else if (f.loop[cp] == 3) 	{ ShapeB(cp, 0, 160); }
			else if (f.loop[cp] == 4) 	{ f.loop[cp] = 0; f.count[cp] += 1; }
		}
		else if(f.count[cp] == 2)
		{
			if (f.loop[cp] == 0) 		{ ShapeA(cp, 114, 114); }
			else if (f.loop[cp] == 1) 	{ ShapeA(cp, 114, -114); }
			else if (f.loop[cp] == 2) 	{ ShapeA(cp, -114, -114); }
			else if (f.loop[cp] == 3) 	{ ShapeA(cp, -114, 114); }
			else if (f.loop[cp] == 4) 	{ f.loop[cp] = 0; f.count[cp] += 1; }
		}
		else if (f.count[cp] == 3)
		{
			if (f.loop[cp] == 0) 		{ ShapeB(cp, 114, 114); }
			else if (f.loop[cp] == 1) 	{ ShapeB(cp, 114, -114); }
			else if (f.loop[cp] == 2) 	{ ShapeB(cp, -114, -114); }
			else if (f.loop[cp] == 3) 	{ ShapeB(cp, -114, 114); }
			else if (f.loop[cp] == 4) 	{ f.loop[cp] = 0; f.count[cp] += 1; }
		}
		else if (f.count[cp] == 4)
		{
			f.SkillWait(cp, 200);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 5)
		{
			if (f.loop[cp] < 8)
			{	
				MoveLocation(f.location[cp], "50 + 1n Battlecruiser", cp, "Anywhere");
				RemoveUnitAt(1, "50 + 1n Battlecruiser", "Anywhere", cp);
				f.SkillUnit(cp, 1, "40 + 1n Gantrithor");
				f.SkillUnit(cp, 8, "Protoss Dark Archon");
				KillUnitAt(All, "40 + 1n Gantrithor", "Anywhere", cp);
				KillUnitAt(All, "Protoss Dark Archon", "Anywhere", cp);
				f.SkillWait(cp, 0);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 8)
			{
				f.loop[cp] = 0;
				f.count[cp] += 1;
			}
		}
		else if (f.count[cp] == 6)
		{
			if (f.loop[cp] == 0)
			{
				ShapeC(cp);
			}
			else if (f.loop[cp] == 1)
			{
				KillUnitAt(All, "50 + 1n Battlecruiser", "Anywhere", cp);
				KillUnitAt(All, "60 + 1n Danimoth", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Mutalisk", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Guardian", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				SetSwitch("Recall - Rusalka", Clear);
				
				f.SkillWait(cp, 500);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 2)
			{
				ShapeC(cp);
			}
			else if (f.loop[cp] == 3)
			{
				KillUnitAt(All, "50 + 1n Battlecruiser", "Anywhere", cp);
				KillUnitAt(All, "60 + 1n Danimoth", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Mutalisk", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Guardian", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				SetSwitch("Recall - Rusalka", Clear);
				
				f.SkillEnd(cp);
			}
		}
	}
}

function ShapeA(cp, x, y)
{
	f.DotShape(cp, 1, "40 + 1n Gantrithor", x, y);
	f.DotShape(cp, 8, "Protoss Dark Archon", x, y);
	KillUnitAt(All, "40 + 1n Gantrithor", "Anywhere", cp);
	KillUnitAt(All, "Protoss Dark Archon", "Anywhere", cp);
	f.SkillWait(cp, 0);
	f.loop[cp] += 1;
}

function ShapeB(cp, x, y)
{
	f.DotShape(cp, 1, "50 + 1n Battlecruiser", x, y);
	f.DotShape(cp, 1, "Torrasque", x, y);
	f.DotShape(cp, 8, "50 + 1n Tank", x, y);
	KillUnitAt(All, "Torrasque", "Anywhere", cp);
	KillUnitAt(All, "50 + 1n Tank", "Anywhere", cp);
	MoveLocation(f.location[cp], f.heroID[cp], cp, "Anywhere");
	Order("50 + 1n Battlecruiser", cp, "Anywhere", Attack, f.location[cp]);
	f.SkillWait(cp, 0);
	f.loop[cp] += 1;
}

function ShapeC(cp)
{
	f.SquareShape(cp, 1, "40 + 1n Mojo", 32, 32);
	f.SquareShape(cp, 1, "40 + 1n Mojo", 64, 0);
	f.SquareShape(cp, 1, "60 + 1n Danimoth", 128, 32);
	f.SquareShape(cp, 1, "60 + 1n Danimoth", 128, -32);
	f.SquareShape(cp, 1, "50 + 1n Battlecruiser", 160, 160);
	f.SquareShape(cp, 1, "50 + 1n Battlecruiser", 224, 0);
	f.SquareShape(cp, 1, "40 + 1n Mutalisk", 160, 64);
	f.SquareShape(cp, 1, "40 + 1n Mutalisk", 160, -64);
	f.SquareShape(cp, 1, "40 + 1n Guardian", 128, 96);
	f.SquareShape(cp, 1, "40 + 1n Guardian", 128, -96);
	
	f.SquareShape(cp, 1, "60 + 1n Archon", 32, 32);
	f.SquareShape(cp, 1, "60 + 1n Archon", 64, 0);
	f.SquareShape(cp, 1, "60 + 1n Archon", 128, 32);
	f.SquareShape(cp, 1, "60 + 1n Archon", 128, -32);
	f.SquareShape(cp, 1, "60 + 1n Archon", 160, 160);
	f.SquareShape(cp, 1, "Protoss Dark Archon", 224, 0);
	f.SquareShape(cp, 1, "Protoss Dark Archon", 160, 64);
	f.SquareShape(cp, 1, "Protoss Dark Archon", 160, -64);
	f.SquareShape(cp, 1, "Protoss Dark Archon", 128, 96);
	f.SquareShape(cp, 1, "Protoss Dark Archon", 128, -96);
	
	KillUnitAt(All, "Protoss Dark Archon", "Anywhere", cp);
	KillUnitAt(All, "60 + 1n Archon", "Anywhere", cp);
	
	MoveLocation(f.location[cp], f.heroID[cp], cp, "Anywhere");
	Order("50 + 1n Battlecruiser", cp, "Anywhere", Attack, f.location[cp]);
	Order("60 + 1n Danimoth", cp, "Anywhere", Attack, f.location[cp]);
	Order("40 + 1n Mutalisk", cp, "Anywhere", Attack, f.location[cp]);
	Order("40 + 1n Guardian", cp, "Anywhere", Attack, f.location[cp]);
	Order("40 + 1n Mojo", cp, "Anywhere", Attack, f.location[cp]);
	f.SkillWait(cp, 130);
	f.loop[cp] += 1;
}