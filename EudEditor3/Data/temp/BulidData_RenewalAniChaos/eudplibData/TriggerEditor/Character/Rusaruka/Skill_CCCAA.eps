import Function as f;

function main(cp)
{

	if (f.count[cp] < 2)
	{
		f.HoldPosition(cp);
		f.BanReturn(cp);
	}
	
	if (f.delay[cp] == 0)
	{
		if (f.count[cp] == 0)
		{
			if (f.loop[cp] == 0)
			{
				f.DotShape(cp, 1, "50 + 1n Battlecruiser", 0, 0);
				f.DotShape(cp, 8, "Torrasque", 0, 0);
				KillUnitAt(All, "Torrasque", "Anywhere", cp);
				f.SkillWait(cp, 0);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] > 0 && f.loop[cp] < 6)
			{
				f.SquareShape(cp, 1, "50 + 1n Battlecruiser", 64 * f.loop[cp], 0);
				f.SquareShape(cp, 8, "Torrasque", 64 * f.loop[cp], 0);
				KillUnitAt(All, "Torrasque", "Anywhere", cp);
				f.SkillWait(cp, 0);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 6)
			{
				f.SkillWait(cp, 0);
				f.loop[cp] = 0;
				f.count[cp] += 1;
			}
		}
		else if (f.count[cp] == 1)
		{
			if (f.loop[cp] < 10)
			{
				f.Table_Cos(cp, 18 * f.loop[cp], 352 - 32 * f.loop[cp]);
				f.Table_Sin(cp, 18 * f.loop[cp], 352 - 32 * f.loop[cp]);
				f.SquareShape(cp, 1, "40 + 1n Mutalisk", f.CosAngle[cp], f.SinAngle[cp]);
				f.SquareShape(cp, 1, "40 + 1n Lurker", f.CosAngle[cp], f.SinAngle[cp]);
				
				f.Table_Cos(cp, 180 - 18 * f.loop[cp], 352 - 32 * f.loop[cp]);
				f.Table_Sin(cp, 180 - 18 * f.loop[cp], 352 - 32 * f.loop[cp]);
				f.SquareShape(cp, 1, "40 + 1n Mojo", f.CosAngle[cp], f.SinAngle[cp]);
				f.SquareShape(cp, 1, "40 + 1n Lurker", f.CosAngle[cp], f.SinAngle[cp]);
				
				f.Table_Cos(cp, 15 * f.loop[cp], 320 - 24 * f.loop[cp]);
				f.Table_Sin(cp, 15 * f.loop[cp], 320 - 24 * f.loop[cp]);
				f.SquareShape(cp, 1, "60 + 1n Siege", f.CosAngle[cp], f.SinAngle[cp]);
				f.SquareShape(cp, 8, "Protoss Dark Archon", f.CosAngle[cp], f.SinAngle[cp]);
				
				KillUnitAt(All, "40 + 1n Lurker", "Anywhere", cp);
				KillUnitAt(All, "60 + 1n Archon", "Anywhere", cp);
				KillUnitAt(All, "Protoss Dark Archon", "Anywhere", cp);
				
				MoveLocation(f.location[cp], f.heroID[cp], cp, "Anywhere");
				Order("40 + 1n Mutalisk", cp, "Anywhere", Attack, f.location[cp]);
				Order("40 + 1n Mojo", cp, "Anywhere", Attack, f.location[cp]);
				
				f.SkillWait(cp, 0);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 10)
			{
				f.SkillWait(cp, 1000);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 11)
			{
				KillUnitAt(All, "50 + 1n Battlecruiser", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Mutalisk", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				f.SkillWait(cp, 2000);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 12)
			{
				f.loop[cp] = 0;
				f.count[cp] += 1;
			}
		}
		else if (f.count[cp] == 2)
		{
			if (f.loop[cp] == 0)
			{
				f.SkillWait(cp, 5500);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 1)
			{
				SetSwitch("Recall - Rusalka", Clear);
				KillUnitAt(All, "60 + 1n Siege", "Anywhere", cp);
				
				f.SkillEnd(cp);
			}
		}
	}
}