import Function as f;

function Shape(cp, UnitA : TrgUnit, UnitB : TrgUnit, x, y);

function main(cp)
{
	if (f.delay[cp] == 0)
	{
		if (f.count[cp] == 0)
		{
			f.DotShape(cp, 1, "60 + 1n Danimoth", 0, 0);
			KillUnitAt(All, "60 + 1n Danimoth", "Anywhere", cp);
			f.SkillWait(cp, 0);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 1)
		{
			f.NxNSquareShape(cp, 1, "60 + 1n Danimoth", 3, 64);
			KillUnitAt(All, "60 + 1n Danimoth", "Anywhere", cp);
			f.SkillWait(cp, 0);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 2)
		{
			if (f.loop[cp] == 0)
			{
				f.SquareShape(cp, 1, "50 + 1n Tank", 128, 64);
				MoveLocation(f.location[cp], f.heroID[cp], cp, "Anywhere");
				Order("50 + 1n Tank", cp, "Anywhere", Attack, f.location[cp]);
				f.SkillWait(cp, 0);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 1)
			{
				f.SquareShape(cp, 1, "50 + 1n Tank", 64, 128);
				MoveLocation(f.location[cp], f.heroID[cp], cp, "Anywhere");
				Order("50 + 1n Tank", cp, "Anywhere", Attack, f.location[cp]);
				f.SkillWait(cp, 0);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 2)
			{
				f.SquareShape(cp, 1, "40 + 1n Goliath", 64, 64);
				MoveLocation(f.location[cp], f.heroID[cp], cp, "Anywhere");
				Order("40 + 1n Goliath", cp, "Anywhere", Attack, f.location[cp]);
				f.SkillWait(cp, 1000);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 3)
			{
				f.count[cp] += 1;
				f.loop[cp] = 0;
			}
		}
		else if (f.count[cp] == 3)
		{
			if (f.loop[cp] == 0)
			{
				Shape(cp, "40 + 1n Mojo", "Protoss Dark Archon", 96, 32);
				f.SkillWait(cp, 50);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 1)
			{
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				Shape(cp, "40 + 1n Mojo", "Protoss Dark Archon", 32, 32);
				f.SkillWait(cp, 50);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 2)
			{
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				Shape(cp, "40 + 1n Mojo", "Protoss Dark Archon", -32, 32);
				f.SkillWait(cp, 50);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 3)
			{
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				Shape(cp, "40 + 1n Mojo", "Protoss Dark Archon", -96, 32);
				f.SkillWait(cp, 50);
				f.loop[cp] += 1;
			}
			else if (f.loop[cp] == 4)
			{
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				KillUnitAt(All, "50 + 1n Tank", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Goliath", "Anywhere", cp);
				f.SkillEnd(cp);
			}
		}
	}
	
	if (f.delayB[cp] == 0)
	{
		if (f.count[cp] == 2)
		{
			if (f.loopB[cp] == 0)
			{
				f.Table_Cos(cp, 45, 128);
				f.Table_Sin(cp, 45, 128);
				
				f.SquareShape(cp, 1, "40 + 1n Mojo", 128, 128);
				f.SquareShape(cp, 1, "40 + 1n Wraith", f.CosAngle[cp] + f.SinAngle[cp], -f.SinAngle[cp] + f.CosAngle[cp]);
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Wraith", "Anywhere", cp);
				f.SkillWaitB(cp, 0);
				f.loopB[cp] += 1;
			}
			else if (f.loopB[cp] == 1)
			{
				f.Table_Cos(cp, 45, 128);
				f.Table_Sin(cp, 45, 64);
				
				f.SquareShape(cp, 1, "40 + 1n Mojo", 128, 64);
				f.SquareShape(cp, 1, "40 + 1n Wraith", f.CosAngle[cp] + f.SinAngle[cp], -f.SinAngle[cp] + f.CosAngle[cp]);
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Wraith", "Anywhere", cp);
				f.SkillWaitB(cp, 0);
				f.loopB[cp] += 1;
			}
			else if (f.loopB[cp] == 2)
			{
				f.Table_Cos(cp, 45, 128);
				f.Table_Sin(cp, 45, 0);
				
				f.SquareShape(cp, 1, "40 + 1n Mojo", 128, 0);
				f.SquareShape(cp, 1, "40 + 1n Wraith", f.CosAngle[cp] + f.SinAngle[cp], -f.SinAngle[cp] + f.CosAngle[cp]);
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Wraith", "Anywhere", cp);
				f.SkillWaitB(cp, 0);
				f.loopB[cp] += 1;
			}
			else if (f.loopB[cp] == 3)
			{
				f.Table_Cos(cp, 45, 64);
				f.Table_Sin(cp, 45, 128);
				
				f.SquareShape(cp, 1, "40 + 1n Mojo", 128, -64);
				f.SquareShape(cp, 1, "40 + 1n Wraith", f.CosAngle[cp] + f.SinAngle[cp], -f.SinAngle[cp] + f.CosAngle[cp]);
				KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
				KillUnitAt(All, "40 + 1n Wraith", "Anywhere", cp);
				f.SkillWaitB(cp, 0);
				f.loopB[cp] = 0;
			}
		}
	}
}

function Shape(cp, UnitA : TrgUnit, UnitB : TrgUnit, x, y)
{
	f.MoveLoc(f.heroID[cp], cp, x, y);
	f.SkillUnit(cp, 1, UnitA);
	f.SkillUnit(cp, 1, UnitB);
	f.MoveLoc(f.heroID[cp], cp, -x, -y);
	f.SkillUnit(cp, 1, UnitA);
	f.SkillUnit(cp, 1, UnitB);
	KillUnitAt(All, UnitB, "Anywhere", cp);
	MoveLocation(f.location[cp], f.heroID[cp], cp, "Anywhere");
	Order(UnitA, cp, "Anywhere", Attack, f.location[cp]);
}