import Function as f;

function main(cp)
{
	if (f.wait[cp] == 0 && f.step[cp] == 0)
	{
		if (Bring(cp, AtLeast, 1, "Protoss Corsair", "[Skill]UseSkill")
		&& Deaths(CurrentPlayer, AtLeast, 1, " `O Skill Condition")
		&& Deaths(CurrentPlayer, Exactly, 0, " `UniqueCoolTime"))
		{
			f.Voice_Routine(cp, 27);
		
			f.step[cp] = 1;
			KillUnitAt(1, "Protoss Corsair", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 1, "Protoss Corsair", "[Skill]UseSkill"))
		{
			SetResources(CurrentPlayer, Add, 60, Gas);
			KillUnitAt(1, "Protoss Corsair", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 1, "Protoss Carrier", "[Skill]UseSkill"))
		{
			f.step[cp] = 200;
			KillUnitAt(1, "Protoss Carrier", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 1, "Protoss Arbiter", "[Skill]UseSkill"))
		{
			f.step[cp] = 300;
			KillUnitAt(1, "Protoss Arbiter", "[Skill]UseSkill", cp);
		}
		
		else if (Bring(cp, AtLeast, 1, "Protoss Scout", "[Skill]UseSkill"))
		{
			f.step[cp] = 100;
			KillUnitAt(1, "Protoss Scout", "[Skill]UseSkill", cp);
		}

	}
	
	// Combo
	if (f.wait[cp] >= 2 && f.count[cp] == 0)
	{
		if (Bring(cp, AtLeast, 2, "Protoss Scout", "[Skill]UseSkill") && f.step[cp] == 100)
		{
			f.Voice_Routine(cp, 13);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 110;
			KillUnitAt(2, "Protoss Scout", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 2, "Protoss Carrier", "[Skill]UseSkill") 
		&& f.step[cp] == 110)
		{
			f.Voice_Routine(cp, 14);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 120;
			KillUnitAt(2, "Protoss Carrier", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 2, "Protoss Arbiter", "[Skill]UseSkill")
		&& f.step[cp] == 120)
		{
			f.Voice_Routine(cp, 15);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 130;
			KillUnitAt(2, "Protoss Arbiter", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 1, "Protoss Carrier", "[Skill]UseSkill") && f.step[cp] == 200
		&& Switch("Reinforce - Oda", Set))
		{
			f.Voice_Routine(cp, 18);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 210;
			KillUnitAt(1, "Protoss Carrier", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 1, "Protoss Arbiter", "[Skill]UseSkill") && f.step[cp] == 210)
		{
			f.Voice_Routine(cp, 19);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 220;
			KillUnitAt(1, "Protoss Arbiter", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 2, "Protoss Carrier", "[Skill]UseSkill") && f.step[cp] == 220)
		{
			f.Voice_Routine(cp, 20);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 230;
			KillUnitAt(2, "Protoss Carrier", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 2, "Protoss Arbiter", "[Skill]UseSkill") && f.step[cp] == 230)
		{
			f.Voice_Routine(cp, 22);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 240;
			KillUnitAt(2, "Protoss Arbiter", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 1, "Protoss Arbiter", "[Skill]UseSkill") 
		&& f.step[cp] == 300
		&& Switch("Reinforce - Oda", Set))
		{
			f.Voice_Routine(cp, 25);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 330;
			KillUnitAt(1, "Protoss Arbiter", "[Skill]UseSkill", cp);
		}
		
		// Ultimate
		else if (Bring(cp, AtLeast, 3, "Protoss Carrier", "[Skill]UseSkill") 
		&& f.step[cp] == 300
		&& Deaths(cp, AtLeast, f.UltimateA[cp], " `UltimateCoolTime"))
		{
			if (Switch("UiltimateSwitch", Cleared))
			{
				f.Voice_Routine(cp, 1);
				SetSwitch("UiltimateSwitch", Set);
               		CreateUnit(1, " Item. Flag", "[Uiltimate]Flag", CurrentPlayer);
				f.wait[cp] = 0;
				f.count[cp] = 0;
				f.loop[cp] = 0;
				f.step[cp] = 310;
				SetDeaths(cp, Subtract, f.UltimateA[cp], " `UltimateCoolTime");
				KillUnitAt(3, "Protoss Carrier", "[Skill]UseSkill", cp);
			}
			else
			{
				SetResources(CurrentPlayer, Add, 900, Gas);
				KillUnitAt(3, "Protoss Arbiter", "[Skill]UseSkill", cp);
				SetDeaths(CurrentPlayer, SetTo, 999, " `SYSTEMTEXT");
			}
		}
		else if (Bring(cp, AtLeast, 2, "Protoss Arbiter", "[Skill]UseSkill") 
		&& f.step[cp] == 310
		&& Deaths(cp, AtLeast, f.UltimateB[cp], " `UltimateCoolTime")
		)
		{
			SetSwitch("UiltimateSwitch", Set);
			SetSwitch("Ult - Oda", Set);
			f.Voice_Routine(cp, 7);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 320;
			SetDeaths(cp, Subtract, f.UltimateB[cp], " `UltimateCoolTime");
			KillUnitAt(2, "Protoss Arbiter", "[Skill]UseSkill", cp);
		}
		else if (Bring(cp, AtLeast, 1, "Protoss Corsair", "[Skill]UseSkill") 
		&& f.step[cp] == 300
		&& Deaths(CurrentPlayer, AtLeast, 1, " `O Skill Condition")
		&& Switch("Reinforce - Oda", Cleared)
		)
		{
			f.Voice_Routine(cp, 28);
			f.wait[cp] = 0;
			f.count[cp] = 0;
			f.loop[cp] = 0;
			f.step[cp] = 340;
			KillUnitAt(1, "Protoss Corsair", "[Skill]UseSkill", cp);
		}
		

	}
}