import getunitID as id;

import System.Main as sym;
import Shop.Main as shm;
import Title.Main as tm;

import Angel.Main as am;
import Fairy.Main as fm;
import Princess.Main as pm;

var cp;
var vTime;

function onPluginStart();
function beforeTriggerExec();
function afterTriggerExec();

function FixedUpdate();
function PlayerUpdate(cp);

function onPluginStart()
{
	randomize();
	
	am.Init();
	fm.Init();
	pm.Init();
}


function beforeTriggerExec()
{
	EUDPlayerLoop()();
	
	cp = getcurpl();
	PlayerUpdate(cp);
	
	EUDEndPlayerLoop();

	vTime += 1;
	if (vTime >= 24)
	{
		FixedUpdate();
		vTime = 0;
	}
}

function FixedUpdate()
{
	sym.FixedUpdate();
	shm.FixedUpdate();
	tm.FixedUpdate();
	
	am.FixedUpdate();
	fm.FixedUpdate();
	pm.FixedUpdate();
}

function PlayerUpdate(cp)
{
	id.Get_UnitID(cp);
	
	sym.PlayerUpdate(cp);
	shm.PlayerUpdate(cp);
	tm.PlayerUpdate(cp);
}