import variable_title as vt;
import variable_data as vd;
import getunitID as id;

function Cloth_Ticket(cp);
function Cloth_Ticket_Effect(ID, Index, cp);

function Set_Title(ID, Index);
function Title_Value(id, value);
function Check_Title(id, num, value);

const s = StringBuffer();

function Cloth_Ticket(cp)
{
	if (Bring(cp, AtLeast, 1, 123, "JewelGacha Step 1"))
	{
		if(Bring(cp, AtLeast, 1, 28, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(28 ,35, cp); 	}
		if(Bring(cp, AtLeast, 1, 32, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(32 ,36, cp); 	}
		if(Bring(cp, AtLeast, 1, 102, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(102 ,37, cp); 	}
		if(Bring(cp, AtLeast, 1, 104, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(104 ,38, cp); 	}
		if(Bring(cp, AtLeast, 1, 0, "lounge_Cloth")) 		{ Cloth_Ticket_Effect(0 ,39, cp); 	}
		if(Bring(cp, AtLeast, 1, 1, "lounge_Cloth")) 		{ Cloth_Ticket_Effect(1 ,40, cp);	}
		if(Bring(cp, AtLeast, 1, 2, "lounge_Cloth")) 		{ Cloth_Ticket_Effect(2 ,41, cp); 	}
		if(Bring(cp, AtLeast, 1, 8, "lounge_Cloth")) 		{ Cloth_Ticket_Effect(8 ,42, cp); 	}
		if(Bring(cp, AtLeast, 1, 9, "lounge_Cloth")) 		{ Cloth_Ticket_Effect(9 ,43, cp); 	}
		if(Bring(cp, AtLeast, 1, 10, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(10 ,44, cp); 	}
		if(Bring(cp, AtLeast, 1, 12, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(12 ,45, cp); 	}
		if(Bring(cp, AtLeast, 1, 16, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(16 ,46, cp); 	}
		if(Bring(cp, AtLeast, 1, 19, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(19 ,47, cp); 	}
		if(Bring(cp, AtLeast, 1, 20, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(20 ,48, cp); 	}
		if(Bring(cp, AtLeast, 1, 21, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(21 ,49, cp); 	}
		if(Bring(cp, AtLeast, 1, 37, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(37 ,50, cp); 	}
		if(Bring(cp, AtLeast, 1, 38, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(38 ,51, cp); 	}
	}
	
	if (Bring(cp, AtLeast, 1, 122, "JewelGacha Step 1"))
	{
		if(Bring(cp, AtLeast, 1, 29, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(29 ,18, cp); 	}
		if(Bring(cp, AtLeast, 1, 80, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(80 ,19, cp); 	}
		if(Bring(cp, AtLeast, 1, 63, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(63 ,20, cp); 	}
		if(Bring(cp, AtLeast, 1, 87, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(87 ,21, cp); 	}
		if(Bring(cp, AtLeast, 1, 39, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(39 ,22, cp); 	}
		if(Bring(cp, AtLeast, 1, 40, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(40 ,23, cp); 	}
		if(Bring(cp, AtLeast, 1, 43, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(43 ,24, cp); 	}
		if(Bring(cp, AtLeast, 1, 44, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(44 ,25, cp); 	}
		if(Bring(cp, AtLeast, 1, 46, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(46 ,26, cp); 	}
		if(Bring(cp, AtLeast, 1, 48, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(48 ,27, cp); 	}
		if(Bring(cp, AtLeast, 1, 51, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(51 ,28, cp); 	}
		if(Bring(cp, AtLeast, 1, 52, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(52 ,29, cp); 	}
		if(Bring(cp, AtLeast, 1, 53, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(53 ,30, cp); 	}
		if(Bring(cp, AtLeast, 1, 54, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(54 ,31, cp); 	}
		if(Bring(cp, AtLeast, 1, 55, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(55 ,32, cp); 	}
		if(Bring(cp, AtLeast, 1, 56, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(56 ,33, cp); 	}
		if(Bring(cp, AtLeast, 1, 60, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(60 ,34, cp); 	}
	}
	if (Bring(cp, AtLeast, 1, 116, "JewelGacha Step 1"))
	{
		if(Bring(cp, AtLeast, 1, 27, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(27, 1, cp); 	}
		if(Bring(cp, AtLeast, 1, 88, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(88, 2, cp); 	}
		if(Bring(cp, AtLeast, 1, 99, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(99, 3, cp); 	}
		if(Bring(cp, AtLeast, 1, 100, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(100, 4, cp); 	}
		if(Bring(cp, AtLeast, 1, 61, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(61, 5, cp); 	}
		if(Bring(cp, AtLeast, 1, 65, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(65, 6, cp); 	}
		if(Bring(cp, AtLeast, 1, 66, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(66, 7, cp); 	}
		if(Bring(cp, AtLeast, 1, 67, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(67, 8, cp); 	}
		if(Bring(cp, AtLeast, 1, 68, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(68, 9, cp); 	}
		if(Bring(cp, AtLeast, 1, 70, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(70, 10, cp); 	}
		if(Bring(cp, AtLeast, 1, 71, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(71, 11, cp); 	}
		if(Bring(cp, AtLeast, 1, 74, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(74, 12, cp); 	}
		if(Bring(cp, AtLeast, 1, 75, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(75, 13, cp); 	}
		if(Bring(cp, AtLeast, 1, 76, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(76, 14, cp); 	}
		if(Bring(cp, AtLeast, 1, 77, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(77, 15, cp); 	}
		if(Bring(cp, AtLeast, 1, 78, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(78, 16, cp); 	}
		if(Bring(cp, AtLeast, 1, 79, "lounge_Cloth")) 	{ Cloth_Ticket_Effect(79, 17, cp); 	}
	}
}

function Cloth_Ticket_Effect(ID, Index, cp)
{
	SetDeaths(P8, Add, 100, ID);
	s.print("\n\x13", ptr2s(GetTBLAddr(id.Unit_ID[cp] + 1)), "\x04 에게 의상을 선물하였습니다.\n");
	Set_Title(ID, Index);
}

function Set_Title(ID, Index)
{
	if (Deaths(P8, AtLeast, 100, ID) && vt.title_flag[Index] == 0)
	{ 
		Title_Value(ID, 1); vt.title_flag[Index] = 1;
		bwrite(0x6564E0 + 2776 + ID * 1, vd.Title1_Effect_Speed[(Index-1)%17]); // 공격 속도
	}
	if (Deaths(P8, AtLeast, 200, ID) && vt.title_flag[Index] == 1)
	{ 
		Title_Value(ID, 2); vt.title_flag[Index] = 2; 
		bwrite(0x6564E0 + 2776 + ID * 1, vd.Title2_Effect_Speed[(Index-1)%17]); // 공격 속도
	}
	if (Deaths(P8, AtLeast, 400, ID) && vt.title_flag[Index] == 2)	
	{ 
		Title_Value(ID, 3); vt.title_flag[Index] = 3; 
		bwrite(0x6564E0 + 2776 + ID * 1, vd.Title3_Effect_Speed[(Index-1)%17]); // 공격 속도
	}
	if (Deaths(P8, AtLeast, 800, ID) && vt.title_flag[Index] == 3)
	{ 
		Title_Value(id, 4); vt.title_flag[Index] = 4;
		bwrite(0x6564E0 + 2776 + ID * 1, vd.Title4_Effect_Speed[(Index-1)%17]); // 공격 속도
	}
}

function Title_Value(id, value)
{
	switch(id)
	{
	// Princess
	case 27: 
		settbl(1318, 0, ptr2s(vt.title_35[value]));
		break;
	case 88: 
		settbl(1319, 0, ptr2s(vt.title_36[value]));
		break;
	case 99:
		settbl(1320, 0, ptr2s(vt.title_37[value]));
		break;
	case 100:
		settbl(1321, 0, ptr2s(vt.title_38[value]));
		break;
	case 61:
		settbl(1322, 0, ptr2s(vt.title_39[value]));
		break;
	case 65:
		settbl(1323, 0, ptr2s(vt.title_40[value]));
		break;
	case 66:
		settbl(1324, 0, ptr2s(vt.title_41[value]));
		break;
	case 67:
		settbl(1325, 0, ptr2s(vt.title_42[value]));
		break;
	case 68:
		settbl(1326, 0, ptr2s(vt.title_43[value]));
		break;
	case 70:
		settbl(1327, 0, ptr2s(vt.title_44[value]));
		break;
	case 71:
		settbl(1328, 0, ptr2s(vt.title_45[value]));
		break;
	case 74:
		settbl(1329, 0, ptr2s(vt.title_46[value]));
		break;
	case 75:
		settbl(1330, 0, ptr2s(vt.title_47[value]));
		break;
	case 76:
		settbl(1331, 0, ptr2s(vt.title_48[value]));
		break;
	case 77:
		settbl(1332, 0, ptr2s(vt.title_49[value]));
		break;
	case 78:
		settbl(1333, 0, ptr2s(vt.title_50[value]));
		break;
	case 79:
		settbl(1334, 0, ptr2s(vt.title_51[value]));
		break;
		
	// Fairy
	case 29:
		settbl(1335, 0, ptr2s(vt.title_18[value]));
		break;
	case 80:
		settbl(1336, 0, ptr2s(vt.title_19[value]));
		break;
	case 63:
		settbl(1337, 0, ptr2s(vt.title_20[value]));
		break;
	case 87:
		settbl(1338, 0, ptr2s(vt.title_21[value]));
		break;
	case 39:
		settbl(1339, 0, ptr2s(vt.title_22[value]));
		break;
	case 40:
		settbl(1340, 0, ptr2s(vt.title_23[value]));
		break;
	case 43:
		settbl(1341, 0, ptr2s(vt.title_24[value]));
		break;
	case 44:
		settbl(1342, 0, ptr2s(vt.title_25[value]));
		break;
	case 46:
		settbl(1343, 0, ptr2s(vt.title_26[value]));
		break;
	case 48:
		settbl(1344, 0, ptr2s(vt.title_27[value]));
		break;
	case 51:
		settbl(1345, 0, ptr2s(vt.title_28[value]));
		break;
	case 52:
		settbl(1346, 0, ptr2s(vt.title_29[value]));
		break;
	case 53: 
		settbl(1347, 0, ptr2s(vt.title_30[value]));
		break;
	case 54:
		settbl(1348, 0, ptr2s(vt.title_31[value]));
		break;
	case 55: 
		settbl(1349, 0, ptr2s(vt.title_32[value]));
		break;
	case 56:
		settbl(1350, 0, ptr2s(vt.title_33[value]));
		break;
	case 60:
		settbl(1351, 0, ptr2s(vt.title_34[value]));
		break;
	
	// Angel
	case 28:
		settbl(1352, 0, ptr2s(vt.title_01[value]));
		break;
	case 32:
		settbl(1353, 0, ptr2s(vt.title_02[value]));
		break;
	case 102:
		settbl(1354, 0, ptr2s(vt.title_03[value]));
		break;
	case 104:
		settbl(1355, 0, ptr2s(vt.title_04[value]));
		break;
	case 0:
		settbl(1356, 0, ptr2s(vt.title_05[value]));
		break;
	case 1:
		settbl(1357, 0, ptr2s(vt.title_06[value]));
		break;
	case 2:
		settbl(1358, 0, ptr2s(vt.title_07[value]));
		break;
	case 8:
		settbl(1359, 0, ptr2s(vt.title_08[value]));
		break;
	case 9:
		settbl(1360, 0, ptr2s(vt.title_09[value]));
		break;
	case 10:
		settbl(1361, 0, ptr2s(vt.title_10[value]));
		break;
	case 12:
		settbl(1362, 0, ptr2s(vt.title_11[value]));
		break;
	case 16:
		settbl(1363, 0, ptr2s(vt.title_12[value]));
		break;
	case 19:
		settbl(1364, 0, ptr2s(vt.title_13[value]));
		break;
	case 20:
		settbl(1365, 0, ptr2s(vt.title_14[value]));
		break;
	case 21:
		settbl(1366, 0, ptr2s(vt.title_15[value]));
		break;
	case 37:
		settbl(1367, 0, ptr2s(vt.title_16[value]));
		break;
	case 38:
		settbl(1368, 0, ptr2s(vt.title_17[value]));
		break;
	}
}