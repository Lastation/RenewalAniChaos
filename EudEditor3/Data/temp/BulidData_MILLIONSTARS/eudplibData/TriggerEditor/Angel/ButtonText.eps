import Angel.Variable as v;

function Init_ButtonText();
function Set_Dear_ButtonText(id);
function Set_Album_ButtonText(id);

function Add_DearNow(id, value);
function Add_AlbumNow(id, value);

function Set_DearLevel(id);
function Set_AlbumLevel(id);

function Update_ButtomText(cp)
{
	if (Kills(cp, AtLeast, 1, "Terran Bunker"))
	{
		SetKills(cp, Subtract, 1, "Terran Bunker");
		
		for (var i = 0; i < 6; i++)
		{
			Add_DearNow(i, 100);
			Add_AlbumNow(i, 1);
		}
	}
}

function Init_ButtonText()
{
	for (var i = 0; i < 6; i++)
	{
		CreateUnit(1, v.Unit_ID[i], "Player1", P1);
		
		Set_Dear_ButtonText(i);
		Set_Album_ButtonText(i);
	}
}

function Set_Dear_ButtonText(id)
{
	if (v.Dear_Level[id] < 10)
	{
		settbl(1048 + id * 2, 10, v.Dear_Now[id], "/", v.Dear_Need[v.Dear_Level[id]],
		"\n\x19", ptr2s(v.Dear_Text[id])," Lv.", v.Dear_Level[id],
		"\n\x04", ptr2s(v.Dear_SubText[v.Dear_Ablity[id]]), " \x19", v.Dear_Level[id] * v.Dear_Multiply[id], ptr2s(v.Dear_EndText[v.Dear_Ablity[id]]));
	}
	else
	{
		settbl(1048 + id * 2, 10, v.Dear_Now[id],
		"\n\x19", ptr2s(v.Dear_Text[id])," Lv. Max",
		"\n\x04", ptr2s(v.Dear_SubText[v.Dear_Ablity[id]]), " \x19", v.Dear_Level[id] * v.Dear_Multiply[id], ptr2s(v.Dear_EndText[v.Dear_Ablity[id]]));
	}
}

function Set_Album_ButtonText(id)
{
	if (v.Album_Level[id] < 10)
	{
		settbl(1049 + id * 2, 8, v.Album_Now[id], "/", v.Album_Need[v.Album_Level[id]],
		"\n\x19", ptr2s(v.Album_Text[id])," Lv.", v.Album_Level[id],
		"\n\x04", ptr2s(v.Album_SubText[id]), " \x19", v.Album_Level[id] * v.Album_Multiply[id], ptr2s(v.Album_EndText[v.Album_Ablity[id]]));
	}
	else
	{
		settbl(1049 + id * 2, 8, v.Album_Now[id],
		"\n\x19", ptr2s(v.Album_Text[id])," Lv. Max",
		"\n\x04", ptr2s(v.Album_SubText[id]), " \x19", v.Album_Level[id] * v.Album_Multiply[id], ptr2s(v.Album_EndText[v.Album_Ablity[id]]));
	}
}

function Add_DearNow(id, value)
{
	v.Dear_Now[id] += value;
	Set_DearLevel(id);
}

function Add_AlbumNow(id, value)
{
	v.Album_Now[id] += value;
	Set_AlbumLevel(id);
}

function Set_DearLevel(id)
{
	if (v.Dear_Now[id] >= v.Dear_Need[v.Dear_Level[id]] && v.Dear_Level[id] < 10)
	{ 
		v.Dear_Level[id] += 1;
		Set_Dear_ButtonText(id);
	}
	else
	{ Set_Dear_ButtonText(id); }
}

function Set_AlbumLevel(id)
{
	if (v.Album_Now[id] >= v.Album_Need[v.Album_Level[id]] && v.Album_Level[id] < 10)
	{ 
		v.Album_Level[id] += 1;
		Set_Album_ButtonText(id);
	}
	else
	{ Set_Album_ButtonText(id); }
}