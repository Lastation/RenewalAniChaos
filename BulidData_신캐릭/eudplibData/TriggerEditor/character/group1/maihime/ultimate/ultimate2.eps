import PluginVariables as msqcvar;
import variable as v;
import func.trig as trg;
import func.trigadv as adv;
import func.sound as s;

var x = 0;
function main(playerID)
{
	trg.Buff_ShieldFix(100);
	trg.Debuff_BanReturn();
	if (v.P_WaitMain[playerID] == 0)
	{
		MoveUnit(All,"50 + 1n Tank", playerID, "Anywhere", "[Skill]HoldPosition");
		MoveUnit(All,"40 + 1n Goliath", playerID, "Anywhere", "[Skill]HoldPosition");
		if (v.P_CountMain[playerID] == 0)
		{
			RemoveUnitAt(All,"80 + 1n Guardian","Anywhere",playerID);
			RemoveUnitAt(All,"100 + 1n Hyperion","Anywhere",playerID);
			if (v.P_LoopMain[playerID] == 0)
			{
				trg.Main_Wait(1900);	
			}
			else if (v.P_LoopMain[playerID] == 1)
			{
				s.CharacterVoice(13);
				trg.Main_Wait(5100);	
			}
			else if (v.P_LoopMain[playerID] == 2)
			{
				s.CharacterVoice(10);
			}
			else if (v.P_LoopMain[playerID] <= 12)
			{
				trg.Shape_Square(playerID,1,"60 + 1n Siege",64 +x,64 +x);
				trg.Shape_Square(playerID,1,"60 + 1n Siege",64+x,0);
				trg.Shape_Square(playerID,3,"40 + 1n Mojo",64+x,64+x);
				trg.Shape_Square(playerID,3,"40 + 1n Wraith",64+x,0);
				trg.Shape_Square(playerID,1,"Protoss Observer",64+x,64+x);
				trg.Shape_Square(playerID,1,"Protoss Observer",64+x,0);
				trg.Shape_Square(playerID,1,"Protoss Observer",64+x,96+x);
				trg.Shape_Square(playerID,1,"Protoss Observer",64+x,32+x);
				KillUnitAt(All,"Protoss Observer","Anywhere",playerID);
				if (playerID < 3)
				{
					GiveUnits(All,"40 + 1n Mojo", CurrentPlayer, "Anywhere", P7);
					GiveUnits(All,"40 + 1n Wraith", CurrentPlayer, "Anywhere", P7);
				}
				else
				{
					GiveUnits(All, "40 + 1n Mojo", CurrentPlayer, "Anywhere", P8);
					GiveUnits(All, "40 + 1n Wraith", CurrentPlayer, "Anywhere", P8);
				}
				SetSwitch("JunkYardDog",Set);
				x += 64;
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 13)
			{
				x = 0;
				trg.Main_Wait(1600);
			}
			else if(v.P_LoopMain[playerID] == 14)
			{
				SetSwitch("JunkYardDog",Clear);
				if (playerID < 3)
				{
					GiveUnits(All, "40 + 1n Mojo", P7, "Anywhere", CurrentPlayer);
					GiveUnits(All, "40 + 1n Wraith", P7, "Anywhere", CurrentPlayer);
				}
				else
				{
					GiveUnits(All, "40 + 1n Mojo", P8, "Anywhere", CurrentPlayer);
					GiveUnits(All, "40 + 1n Wraith", P8, "Anywhere", CurrentPlayer);
				}
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("40 + 1n Mojo",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				Order("40 + 1n Wraith",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(2600);
			}
			else if(v.P_LoopMain[playerID] <= 19)
			{
				trg.Shape_Edge(playerID,1,"Protoss Reaver",45,5+x,128+x*64);
				trg.Shape_Edge(playerID,1,"50 + 1n Tank",45,5+x,128+x*64);
				KillUnitAt(All,"Protoss Reaver","Anywhere",playerID);
				x += 2;
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 20)
			{
				x = 0;
				trg.Main_Wait(1000);
			}
			else if(v.P_LoopMain[playerID] <= 25)
			{
				trg.Shape_Edge(playerID,1,"80 + 1n Artanis",45,13-x,640-x*64);
				trg.Shape_Edge(playerID,1,"50 + 1n Battlecruiser",45,13 -x,640-x*64);
				KillUnitAt(All,"80 + 1n Artanis","Anywhere",playerID);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("50 + 1n Battlecruiser",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				x += 2;
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 26)
			{
				RemoveUnitAt(All,"40 + 1n Mojo","Anywhere",playerID);
				RemoveUnitAt(All,"40 + 1n Wraith","Anywhere",playerID);
				RemoveUnitAt(All,"60 + 1n Siege","Anywhere",playerID);
				RemoveUnitAt(All,"50 + 1n Tank","Anywhere",playerID);
				x = 0;
				trg.Main_Wait(1600);
			}
			else if(v.P_LoopMain[playerID] <= 46)
			{
				trg.Shape_Line(playerID,1,"40 + 1n Goliath",180+30*x,2,64+64*x,0);
				trg.Shape_Line(playerID,1,"40 + 1n Goliath",45+30*x,2,64+64*x,0);
				trg.Shape_Line(playerID,1,"40 + 1n Goliath",90+30*x,2,64+64*x,0);
				trg.Shape_Line(playerID,1,"40 + 1n Goliath",135+30*x,2,64+64*x,0);
				
				trg.Shape_Line(playerID,1,"Protoss Observer",180+30*x,2,64+64*x,0);
				trg.Shape_Line(playerID,1,"Protoss Observer",45+30*x,2,64+64*x,0);
				trg.Shape_Line(playerID,1,"Protoss Observer",90+30*x,2,64+64*x,0);
				trg.Shape_Line(playerID,1,"Protoss Observer",135+30*x,2,64+64*x,0);
				KillUnitAt(All,"Protoss Observer","Anywhere",playerID);
				x += 1;
				
				trg.Main_Wait(120);
			}
			else if(v.P_LoopMain[playerID] == 47)
			{
				x = 0;
				trg.Main_Wait(0);
			}
			else if(v.P_LoopMain[playerID] <= 67)
			{
				trg.Shape_Line(playerID,1,"50 + 1n Tank",180+30*x,2,1280-64*x,0);
				trg.Shape_Line(playerID,1,"50 + 1n Tank",45+30*x,2,1280-64*x,0);
				trg.Shape_Line(playerID,1,"50 + 1n Tank",90+30*x,2,1280-64*x,0);
				trg.Shape_Line(playerID,1,"50 + 1n Tank",135+30*x,2,1280-64*x,0);
				
				trg.Shape_Line(playerID,1,"Protoss Observer",180+30*x,2,1280-64*x,0);
				trg.Shape_Line(playerID,1,"Protoss Observer",45+30*x,2,1280-64*x,0);
				trg.Shape_Line(playerID,1,"Protoss Observer",90+30*x,2,1280-64*x,0);
				trg.Shape_Line(playerID,1,"Protoss Observer",135+30*x,2,1280-64*x,0);
				KillUnitAt(All,"Protoss Observer","Anywhere",playerID);
				x += 1;
		
				trg.Main_Wait(120);
			}
			else if(v.P_LoopMain[playerID] <= 87)
			{
				KillUnitAt(8,"50 + 1n Battlecruiser","Anywhere",playerID);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 88)
			{
				x = 0;
				trg.Main_Wait(800);
			}
			else if(v.P_LoopMain[playerID] == 89)
			{
				for(var i = 0; i < 160; i++)
				{
					MoveLocation(v.P_LocationID[playerID],"50 + 1n Tank",playerID,"Anywhere");
					RemoveUnitAt(1,"50 + 1n Tank","Anywhere",playerID);
					trg.SkillUnit(playerID,1,"60 + 1n Siege");
				}
				KillUnitAt(All,"40 + 1n Goliath","Anywhere",playerID);
				trg.Main_Wait(700);
			}
			else if(v.P_LoopMain[playerID] <= 99)
			{
				trg.Shape_Square(playerID,1,"60 + 1n Danimoth",224,0);
				trg.Shape_Square(playerID,1,"60 + 1n Danimoth",224,224);
				
				trg.Shape_Square(playerID,1,"40 + 1n Gantrithor",224,0);
				trg.Shape_Square(playerID,1,"40 + 1n Gantrithor",224,224);
				
				KillUnitAt(All,"40 + 1n Gantrithor","Anywhere",playerID);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("60 + 1n Danimoth",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(120);
			}
			else if(v.P_LoopMain[playerID] == 100)
			{
				trg.Main_Wait(1000);
			}
			else if(v.P_LoopMain[playerID] <= 110)
			{
				KillUnitAt(8,"60 + 1n Danimoth","Anywhere",playerID);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 111)
			{
				trg.Main_Wait(700);
			}
			else if(v.P_LoopMain[playerID] <= 131)
			{
				trg.Shape_Line(playerID,1,"80 + 1n Guardian",30+x,2,384,0);
				trg.Shape_Line(playerID,1,"80 + 1n Guardian",120+x,2,384,0);
				trg.Shape_Dot(playerID,1,"80 + 1n Guardian",1,0);
				trg.Shape_Dot(playerID,1,"Protoss Observer",1,0);
				trg.Shape_Line(playerID,1,"Protoss Observer",30+x,2,384,0);
				trg.Shape_Line(playerID,1,"Protoss Observer",120+x,2,384,0);
				KillUnitAt(All,"Protoss Observer","Anywhere",playerID);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				x += 15;
				Order("80 + 1n Guardian",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 132)
			{
				trg.Main_Wait(500);
			}
			else if(v.P_LoopMain[playerID] == 133)
			{
				trg.Shape_NxNSquare(playerID,1,"80 + 1n Guardian",3,64);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("80 + 1n Guardian",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(200);
			}
			else if(v.P_LoopMain[playerID] == 134)
			{
				trg.Shape_NxNSquare(playerID,1,"80 + 1n Guardian",9,96);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("80 + 1n Guardian",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(200);
			}
			else if(v.P_LoopMain[playerID] == 136)
			{
				trg.Main_Wait(700);
			}
			else if(v.P_LoopMain[playerID] <= 156)
			{
				trg.Shape_Line(playerID,1,"100 + 1n Hyperion",30+x,2,384,0);
				trg.Shape_Line(playerID,1,"100 + 1n Hyperion",120+x,2,384,0);
				trg.Shape_Dot(playerID,1,"100 + 1n Hyperion",1,0);
				trg.Shape_Line(playerID,1,"40 + 1n Gantrithor",30+x,2,384,0);
				trg.Shape_Line(playerID,1,"40 + 1n Gantrithor",120+x,2,384,0);
				trg.Shape_Dot(playerID,1,"40 + 1n Gantrithor",1,0);
				KillUnitAt(All,"40 + 1n Gantrithor","Anywhere",playerID);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				x += 15;
				Order("100 + 1n Hyperion",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 157)
			{
				trg.Shape_NxNSquare(playerID,1,"50 + 1n Battlecruiser",9,96);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("50 + 1n Battlecruiser",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(1100);
			}
			else if (v.P_LoopMain[playerID] == 158)
			{
				for(var i = 0; i < 80; i++)
				{
					MoveLocation(v.P_LocationID[playerID],"50 + 1n Battlecruiser",playerID,"Anywhere");
					RemoveUnitAt(1,"50 + 1n Battlecruiser","Anywhere",playerID);
					trg.SkillUnit(playerID,1,"100 + 1n Hyperion");
					trg.SkillUnit(playerID,1,"40 + 1n Mutalisk");
					KillUnitAt(All,"100 + 1n Hyperion","Anywhere",playerID);
				}
				if (playerID < 3)
				{
					GiveUnits(All,"40 + 1n Mutalisk", CurrentPlayer, "Anywhere", P7);
				}
				else
				{
					GiveUnits(All, "40 + 1n Mutalisk", CurrentPlayer, "Anywhere", P8);
				}
				KillUnitAt(1,"50 + 1n Battlecruiser","Anywhere",playerID);
				SetSwitch("JunkYardDog",Set);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 159)
			{
				SetSwitch("JunkYardDog",Clear);
				trg.Main_Wait(820);
			}
			else if (v.P_LoopMain[playerID] == 160)
			{
				for(var i = 0; i < 80; i++)
				{
					MoveLocation(v.P_LocationID[playerID],"60 + 1n Siege",playerID,"Anywhere");
					RemoveUnitAt(1,"60 + 1n Siege","Anywhere",playerID);
					trg.SkillUnit(playerID,1,"60 + 3n Siege");
					trg.SkillUnit(playerID,1,"40 + 1n Wraith");
					KillUnitAt(All,"60 + 3n Siege","Anywhere",playerID);
				}
				if (playerID < 3)
				{
					GiveUnits(All,"40 + 1n Wraith", CurrentPlayer, "Anywhere", P7);
				}
				else
				{
					GiveUnits(All,"40 + 1n Wraith", CurrentPlayer, "Anywhere", P8);
				}
				SetSwitch("JunkYardDog",Set);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 161)
			{
				SetSwitch("JunkYardDog",Clear);
				trg.Main_Wait(820);
			}
			else if (v.P_LoopMain[playerID] == 162)
			{
				for(var i = 0; i < 80; i++)
				{
					MoveLocation(v.P_LocationID[playerID],"60 + 1n Siege",playerID,"Anywhere");
					RemoveUnitAt(1,"60 + 1n Siege","Anywhere",playerID);
					trg.SkillUnit(playerID,1,"60 + 3n Siege");
					trg.SkillUnit(playerID,1,"40 + 1n Mojo");
					KillUnitAt(All,"60 + 3n Siege","Anywhere",playerID);
				}
				if (playerID < 3)
				{
					GiveUnits(All,"40 + 1n Mojo", CurrentPlayer, "Anywhere", P7);
				}
				else
				{
					GiveUnits(All,"40 + 1n Mojo", CurrentPlayer, "Anywhere", P8);
				}
				SetSwitch("JunkYardDog",Set);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 163)
			{
				SetSwitch("JunkYardDog",Clear);
				trg.Main_Wait(820);
			}
			else if(v.P_LoopMain[playerID] == 164)
			{
				SetSwitch("JunkYardDog",Set);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 165)
			{
				SetSwitch("JunkYardDog",Clear);
				trg.Main_Wait(720);
			}
			else if(v.P_LoopMain[playerID] == 166)
			{
				SetSwitch("JunkYardDog",Set);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 167)
			{
				SetSwitch("JunkYardDog",Clear);
				trg.Main_Wait(720);
			}
			else if(v.P_LoopMain[playerID] == 168)
			{
				SetSwitch("JunkYardDog",Clear);
				if (playerID < 3)
				{
					GiveUnits(All, "40 + 1n Mojo", P7, "Anywhere", CurrentPlayer);
					GiveUnits(All, "40 + 1n Wraith", P7, "Anywhere", CurrentPlayer);
					GiveUnits(All, "40 + 1n Mutalisk", P7, "Anywhere", CurrentPlayer);
				}
				else
				{
					GiveUnits(All, "40 + 1n Mojo", P8, "Anywhere", CurrentPlayer);
					GiveUnits(All, "40 + 1n Wraith", P8, "Anywhere", CurrentPlayer);
					GiveUnits(All, "40 + 1n Mutalisk", P8, "Anywhere", CurrentPlayer);
				}
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("40 + 1n Mojo",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				Order("40 + 1n Wraith",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				Order("40 + 1n Mutalisk",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(6500);
			}
			else if(v.P_LoopMain[playerID] <= 248)
			{
				KillUnitAt(1,"40 + 1n Wraith","Anywhere",playerID);
				KillUnitAt(1,"40 + 1n Mojo","Anywhere",playerID);
				KillUnitAt(1,"40 + 1n Mutalisk","Anywhere",playerID);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] == 249)
			{
				KillUnitAt(All,"40 + 1n Guardian","Anywhere",playerID);
				KillUnitAt(All,"50 + 1n Battlecruiser","Anywhere",playerID);
				KillUnitAt(All,"40 + 1n Wraith","Anywhere",playerID);
				KillUnitAt(All,"40 + 1n Mutalisk","Anywhere",playerID);
				KillUnitAt(All,"40 + 1n Mojo","Anywhere",playerID);
				KillUnitAt(All,"60 + 1n Siege","Anywhere",playerID);
				KillUnitAt(All,"40 + 1n Lurker","Anywhere",playerID);
				KillUnitAt(All,"40 + 1n Drone","Anywhere",playerID);
				KillUnitAt(All,"50 + 1n Tank","Anywhere",playerID);
				KillUnitAt(All,"60 + 1n Dragoon","Anywhere",playerID);
				x = 0;
				SetSwitch("UiltimateSwitch", Clear);
				SetSwitch("Recall - MaiHime",Clear);
				trg.SkillEnd();
			}
			v.P_LoopMain[playerID] += 1;
		}
	}
}