import variable as v;
import func.trig as trg;

function main(playerID)
{
   trg.Debuff_BanReturn();
   trg.Debuff_Stop();

   if (v.P_WaitMain[playerID] == 0)
   {
      if (v.P_CountMain[playerID] == 0)
      {
         if (v.P_LoopMain[playerID] == 0)
         {
            SetSwitch("Recall - Oda", Set);
         }

         trg.Table_Sin(playerID, 22 * v.P_LoopMain[playerID], 200);
         trg.Table_Cos(playerID, 22 * v.P_LoopMain[playerID], 200);

         var x = v.P_AngleCos[playerID];
         var y = v.P_AngleSin[playerID];

         trg.Shape_Double(playerID, 1, "Bengalaas (Jungle)", x, y);
         KillUnitAt(All, "Bengalaas (Jungle)", "Anywhere", playerID);

         if (v.P_LoopMain[playerID] == 73)
         {
            s.CharacterVoice(29);
         }
         if (v.P_LoopMain[playerID] == 144)
         {
            s.CharacterVoice(30);
         }
         if (v.P_LoopMain[playerID] == 215)
         {
            s.CharacterVoice(31);
         }
         if (v.P_LoopMain[playerID] == 279)
         {
            s.CharacterVoice(32);
         }
         if (v.P_LoopMain[playerID] == 334)
         {
            s.CharacterVoice(33);
         }

         trg.Main_Wait(80);

         v.P_LoopMain[playerID] += 1;

         if (v.P_LoopMain[playerID] == 398)
         {
            v.P_CountMain[playerID] += 1;
            v.P_LoopMain[playerID] = 0;         
         }
      }
      else if (v.P_CountMain[playerID] == 1)
      {
         trg.Table_Sin(playerID, 0, 100);
         trg.Table_Cos(playerID, 0, 100);

         trg.Shape_Square(playerID, 1, " Unit. Hoffnung 25000", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         trg.Table_Sin(playerID, 45, 100);
         trg.Table_Cos(playerID, 45, 100);

         trg.Shape_Square(playerID, 1, " Unit. Hoffnung 25000", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         trg.Table_Sin(playerID, 0, 200);
         trg.Table_Cos(playerID, 0, 200);

         trg.Shape_Square(playerID, 1, " Unit. Hoffnung 25000", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         trg.Table_Sin(playerID, 45, 200);
         trg.Table_Cos(playerID, 45, 200);

         trg.Shape_Square(playerID, 1, " Unit. Hoffnung 25000", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         KillUnitAt(All, " Unit. Hoffnung 25000", "Anywhere", playerID);

         s.CharacterVoice(34);

         SetSwitch("Recall - Oda", Clear);
         SetSwitch("Reinforce - Oda", Set);

         trg.SkillEnd();
      }
   }
   MoveLocation(v.P_LocationID[playerID], v.P_UnitID[playerID], playerID, "Anywhere");

}