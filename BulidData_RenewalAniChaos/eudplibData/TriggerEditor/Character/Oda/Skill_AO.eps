import PluginVariables as msqcvar;
import func.shape as s;

function main(playerID)
{
   s.BanReturn(playerID);
   s.HoldPosition(playerID);

   if (v.P_Delay[playerID] == 0)
   {
      if (v.P_CountMain[playerID] == 0)
      {
         if (v.P_LoopMain[playerID] == 0)
         {
            SetSwitch("Recall - Oda", Set);
         }

         s.Table_Sin(playerID, 22 * v.P_LoopMain[playerID], 200);
         s.Table_Cos(playerID, 22 * v.P_LoopMain[playerID], 200);

         var x = v.P_AngleCos[playerID];
         var y = v.P_AngleSin[playerID];

         s.DoubleShape(playerID, 1, "Bengalaas (Jungle)", x, y);
         KillUnitAt(All, "Bengalaas (Jungle)", "Anywhere", playerID);

         if (v.P_LoopMain[playerID] == 73)
         {
            s.Voice_Routine(playerID, 29);
         }
         if (v.P_LoopMain[playerID] == 144)
         {
            s.Voice_Routine(playerID, 30);
         }
         if (v.P_LoopMain[playerID] == 215)
         {
            s.Voice_Routine(playerID, 31);
         }
         if (v.P_LoopMain[playerID] == 279)
         {
            s.Voice_Routine(playerID, 32);
         }
         if (v.P_LoopMain[playerID] == 334)
         {
            s.Voice_Routine(playerID, 33);
         }

         s.SkillWait(80);

         v.P_LoopMain[playerID] += 1;

         if (v.P_LoopMain[playerID] == 398)
         {
            v.P_CountMain[playerID] += 1;
            v.P_LoopMain[playerID] = 0;         
         }
      }
      else if (v.P_CountMain[playerID] == 1)
      {
         s.Table_Sin(playerID, 0, 100);
         s.Table_Cos(playerID, 0, 100);

         s.Shape_Square(playerID, 1, " Unit. Hoffnung 25000", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         s.Table_Sin(playerID, 45, 100);
         s.Table_Cos(playerID, 45, 100);

         s.Shape_Square(playerID, 1, " Unit. Hoffnung 25000", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         s.Table_Sin(playerID, 0, 200);
         s.Table_Cos(playerID, 0, 200);

         s.Shape_Square(playerID, 1, " Unit. Hoffnung 25000", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         s.Table_Sin(playerID, 45, 200);
         s.Table_Cos(playerID, 45, 200);

         s.Shape_Square(playerID, 1, " Unit. Hoffnung 25000", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         KillUnitAt(All, " Unit. Hoffnung 25000", "Anywhere", playerID);

         s.Voice_Routine(playerID, 34);

         SetSwitch("Recall - Oda", Clear);
         SetSwitch("Reinforce - Oda", Set);

         s.SkillEnd();
      }
   }
   MoveLocation(v.P_LocationID[playerID], v.P_CharacterID[playerID], playerID, "Anywhere");

}