import PluginVariables as msqcvar;
import Variable as v;
import func.shape as s;

function SetDeathValue(playerID)
{
	if (Deaths(CurrentPlayer, (0), 1000, (210)))
	{
		v.DeathOre[0] = 250 + v.Level[playerID] * 10;
		v.DeathOre[1] = 250 + v.Level[playerID] * 10;
		v.DeathOre[2] = 250 + v.Level[playerID] * 10;
		v.DeathOre[3] = 250 + v.Level[playerID] * 10;
		v.DeathOre[4] = 250 + v.Level[playerID] * 10;
		v.DeathOre[5] = 250 + v.Level[playerID] * 10;
		
		CenterView((96));
		
		if (cp >= 0 && cp <= 2)
		{
			v.Team_Num[0] = 2;
			v.Team_Num[1] = 2;
			v.Team_Num[2] = 2;
			v.Team_Num[3] = 2;
			v.Team_Num[4] = 2;
			v.Team_Num[5] = 2;
		
			if (Deaths((0), (10), 15, (172)) || Deaths((1), (10), 15, (172)) || Deaths((2), (10), 15, (172))) { SetSwitch((20), (4)); }
			if (Switch((22), (2)))
			{
				SetDeaths((13), (7), 12, (210)); SetSwitch((23), (4));
			}
			else { SetDeaths(CurrentPlayer, SetTo, 120 + v.Level[playerID] * 12, (210)); }
			if (Deaths(playerID, 10, 22, 172)) SetDeaths(playerID, SetTo, 0, " `UniqueSkill");
			SetResources((3), (8), v.DeathOre[playerID], (0));
			SetResources((4), (8), v.DeathOre[playerID], (0));
			SetResources((5), (8), v.DeathOre[playerID], (0));
		}
		if (cp >= 3 && cp <= 5)
		{
			v.Team_Num[0] = 1;
			v.Team_Num[1] = 1;
			v.Team_Num[2] = 1;
			v.Team_Num[3] = 1;
			v.Team_Num[4] = 1;
			v.Team_Num[5] = 1;
		
			if (Deaths((3), (10), 15, (172)) || Deaths((4), (10), 15, (172)) || Deaths((5), (10), 15, (172))) { SetSwitch((20), (4)); }
			if (Switch((22), (2)))
			{
				SetDeaths((13), (7), 12, (210)); SetSwitch((23), (4));
			}
			else { SetDeaths(CurrentPlayer, SetTo, 120 + v.Level[playerID] * 12, (210)); }
			if (Deaths(playerID, 10, 22, 172)) SetDeaths(playerID, SetTo, 0, " `UniqueSkill");
			SetResources((0), (8), v.DeathOre[playerID], (0));
			SetResources((1), (8), v.DeathOre[playerID], (0));
			SetResources((2), (8), v.DeathOre[playerID], (0));
		}
		
		v.DeathOre_Text[0] = v.DeathOre[playerID];
		v.DeathOre_Text[1] = v.DeathOre[playerID];
		v.DeathOre_Text[2] = v.DeathOre[playerID];
		v.DeathOre_Text[3] = v.DeathOre[playerID];
		v.DeathOre_Text[4] = v.DeathOre[playerID];
		v.DeathOre_Text[5] = v.DeathOre[playerID];
		
		v.Death_Score[playerID] += 1;
	}
}


function DeathText(playerID)
{
	if (v.DeathOre_Text[playerID] != 0)
	{
		const value = dwread_epd(EPD(0x58A364 + 48 * 211 + 4 * playerID));
		
		s.stb.printAt(1,"\n\x13\x08!! Warning !!\n\x13\x19:: \x17", 
		ptr2s(v.Hero_Name[value]), "\x04이 치명상을 입었습니다. \x19::\n\n\x13\x07", 
		v.Team_Num[playerID], "\x04Team \x17+ ",
		v.DeathOre_Text[playerID], " \x04Ore\n");
		
		SetDeaths((13), (7), 0, (211));
		v.DeathOre_Text[playerID] = 0;
	}
}

function SetKillScore(playerID)
{
	if (Kills(CurrentPlayer, AtLeast, 1, 51))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 51); }
	if (Kills(CurrentPlayer, AtLeast, 1, 77))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 77); }
	if (Kills(CurrentPlayer, AtLeast, 1, 74))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 74); }
	if (Kills(CurrentPlayer, AtLeast, 1, 16))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 16); }
	if (Kills(CurrentPlayer, AtLeast, 1, 54))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 54); }
	if (Kills(CurrentPlayer, AtLeast, 1, 99))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 99); }
	if (Kills(CurrentPlayer, AtLeast, 1, 64))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 64); }
	if (Kills(CurrentPlayer, AtLeast, 1, 53))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 53); }
	if (Kills(CurrentPlayer, AtLeast, 1, 34))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 34); }
	if (Kills(CurrentPlayer, AtLeast, 1, 10))	{ v.Kill_Score[playerID] += 1; SetKills(CurrentPlayer, Subtract, 1, 10); }
}