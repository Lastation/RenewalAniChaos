import PluginVariables as msqcvar;
import func.shape as s;

const s = StringBuffer();

function main(playerID)
{
   if (v.P_Delay[playerID] == 0)
   {
      if (v.P_CountMain[playerID] < 4)
      {
         KillUnitAt(All, "40 + 1n Mojo", "Anywhere", playerID);
   
         s.distance[playerID] = 50;
         
         s.Table_Cos(playerID, 45 * v.P_CountMain[playerID], s.distance[playerID]);
         s.Table_Sin(playerID, 45 * v.P_CountMain[playerID], s.distance[playerID]);
        
         s.Shape_Square(playerID, 1, "Protoss Dark Templar", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
         s.MoveLoc(v.P_CharacterID[playerID], playerID, v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
         s.SkillUnit(playerID, 1, "40 + 1n Mojo");
         s.MoveLoc(v.P_CharacterID[playerID], playerID, -v.P_AngleCos[playerID], -v.P_AngleSin[playerID]);
         s.SkillUnit(playerID, 1, "40 + 1n Mojo");

         KillUnitAt(All, "Protoss Dark Templar", "Anywhere", playerID);
         MoveLocation(v.P_LocationID[playerID], v.P_CharacterID[playerID], playerID, "Anywhere");
         Order("40 + 1n Mojo", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
         
         s.SkillWait(160);
         v.P_CountMain[playerID] += 1;
      }
      else if (v.P_CountMain[playerID] == 4)
      {
         KillUnitAt(All, "40 + 1n Mojo", "Anywhere", playerID);

         s.Table_Cos(playerID, 0, s.distance[playerID]);
         s.Table_Sin(playerID, 0, s.distance[playerID]);
            
         s.Shape_Square(playerID, 1, "Kakaru (Twilight)", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         s.Table_Cos(playerID, 45, s.distance[playerID]);
         s.Table_Sin(playerID, 45, s.distance[playerID]);
            
       s.Shape_Square(playerID, 1, "Kakaru (Twilight)", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         KillUnitAt(All, "Kakaru (Twilight)", "Anywhere", playerID);

         s.SkillWait(50);
         v.P_CountMain[playerID] += 1;
      }
      else if (v.P_CountMain[playerID] == 5)
      {
         s.distance[playerID] = 75;

         s.Table_Cos(playerID, 0, s.distance[playerID]);
         s.Table_Sin(playerID, 0, s.distance[playerID]);
            
         s.Shape_Square(playerID, 1, "40 + 1n Guardian", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         s.Table_Cos(playerID, 45, s.distance[playerID]);
         s.Table_Sin(playerID, 45, s.distance[playerID]);
            
         s.Shape_Square(playerID, 1, "40 + 1n Guardian", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
      
         KillUnitAt(All, "40 + 1n Guardian", "Anywhere", playerID);

         s.SkillWait(50);
         v.P_CountMain[playerID] += 1;
      }
      else if (v.P_CountMain[playerID] == 6)
      {
         s.distance[playerID] = 50;
         s.Table_Cos(playerID, 0, s.distance[playerID]);
         s.Table_Sin(playerID, 0, s.distance[playerID]);
            
         s.Shape_Square(playerID, 1, "40 + 1n Mojo", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         s.Table_Cos(playerID, 45, s.distance[playerID]);
         s.Table_Sin(playerID, 45, s.distance[playerID]);
            
         s.Shape_Square(playerID, 1, "40 + 1n Mojo", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);

         MoveLocation(v.P_LocationID[playerID], v.P_CharacterID[playerID], playerID, "Anywhere");
         Order("40 + 1n Mojo", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);

         s.SkillWait(160);
         v.P_CountMain[playerID] += 1;
      }
      else if (v.P_CountMain[playerID] == 7)
      {
         KillUnitAt(All, "40 + 1n Mojo", "Anywhere", playerID);

         s.SkillWait(80);
         v.P_CountMain[playerID] += 1;
      }
      else if (v.P_CountMain[playerID] == 8)
      {
         s.SkillEnd();
      }
   }
}