import PluginVariables as msqcvar;
import func.shape as s;

function main(playerID)
{
	if (s.wait[playerID] == 0 && s.step[playerID] == 0)
	{
		if (Bring(playerID, AtLeast, 1, "Protoss Corsair", "[Skill]UseSkill")
		&& Deaths(CurrentPlayer, AtLeast, 1, " `O Skill Condition")
		&& Deaths(CurrentPlayer, Exactly, 0, " `UniqueCoolTime")
		&& Switch("UiltimateSwitch", Cleared)
		)
		{
			s.Voice_Routine(playerID, 8);
			s.step[playerID] = 1;
			KillUnitAt(1, "Protoss Corsair", "[Skill]UseSkill", playerID);
		}
		else if (Bring(playerID, AtLeast, 1, "Protoss Corsair", "[Skill]UseSkill"))
		{
			SetResources(CurrentPlayer, Add, 60, Gas);
			KillUnitAt(1, "Protoss Corsair", "[Skill]UseSkill", playerID);
		}
		else if (Bring(playerID, AtLeast, 1, "Protoss Carrier", "[Skill]UseSkill"))
		{
			s.step[playerID] = 200;
			KillUnitAt(1, "Protoss Carrier", "[Skill]UseSkill", playerID);
		}
		else if (Bring(playerID, AtLeast, 1, "Protoss Arbiter", "[Skill]UseSkill"))
		{
			s.step[playerID] = 300;
			KillUnitAt(1, "Protoss Arbiter", "[Skill]UseSkill", playerID);
		}
		
		else if (Bring(playerID, AtLeast, 1, "Protoss Scout", "[Skill]UseSkill"))
		{
			s.step[playerID] = 100;
			KillUnitAt(1, "Protoss Scout", "[Skill]UseSkill", playerID);
		}

	}
	
	// Combo
	if (s.wait[playerID] >= 2 && v.P_CountMain[playerID] == 0)
	{
		if (Bring(playerID, AtLeast, 2, "Protoss Scout", "[Skill]UseSkill") && s.step[playerID] == 100)
		{
			s.Voice_Routine(playerID, 1);
			s.wait[playerID] = 0;
			v.P_CountMain[playerID] = 0;
			v.P_LoopMain[playerID] = 0;
			s.step[playerID] = 110;
			KillUnitAt(2, "Protoss Scout", "[Skill]UseSkill", playerID);
		}
		else if (
		Bring(playerID, AtLeast, 2, "Protoss Carrier", "[Skill]UseSkill")
		&& s.step[playerID] == 300)
		{
			s.Voice_Routine(playerID, 2);
			s.wait[playerID] = 0;
			v.P_CountMain[playerID] = 0;
			v.P_LoopMain[playerID] = 0;
			s.step[playerID] = 310;
			KillUnitAt(2, "Protoss Carrier", "[Skill]UseSkill", playerID);
		}
		else if (Bring(playerID, AtLeast, 2, "Protoss Carrier", "[Skill]UseSkill") 
		&& s.step[playerID] == 200)
		{
			s.Voice_Routine(playerID, 3);
			s.wait[playerID] = 0;
			v.P_CountMain[playerID] = 0;
			v.P_LoopMain[playerID] = 0;
			s.step[playerID] = 210;
			KillUnitAt(2, "Protoss Carrier", "[Skill]UseSkill", playerID);
		}
		else if (Bring(playerID, AtLeast, 2, "Protoss Arbiter", "[Skill]UseSkill") && s.step[playerID] == 210)
		{
			s.Voice_Routine(playerID, 4);
			s.wait[playerID] = 0;
			v.P_CountMain[playerID] = 0;
			v.P_LoopMain[playerID] = 0;
			s.step[playerID] = 220;
			KillUnitAt(2, "Protoss Arbiter", "[Skill]UseSkill", playerID);
		}
		
		// Ultimate
		else if (Bring(playerID, AtLeast, 2, "Protoss Arbiter", "[Skill]UseSkill") 
		&& s.step[playerID] == 300
		&& Deaths(playerID, AtLeast, s.UltimateA[playerID], " `UltimateCoolTime"))
		{
			s.Voice_Routine(playerID, 5);
			s.wait[playerID] = 0;
			v.P_CountMain[playerID] = 0;
			v.P_LoopMain[playerID] = 0;
			s.step[playerID] = 320;
			SetDeaths(playerID, Subtract, s.UltimateA[playerID], " `UltimateCoolTime");
			KillUnitAt(2, "Protoss Arbiter", "[Skill]UseSkill", playerID);
		
		}

	}
}