import PluginVariables as msqcvar;
import Function as f;

function main(cp)
{
	f.BanReturn(cp);
	if (f.count[cp] < 7)
	{
		f.HoldPosition(cp);
	}
	
	if (f.count[cp] >= 6 &&f.count[cp] <= 7)
	{
		f.ShieldFix(cp, 1);
	}

	if (f.delay[cp] == 0)
	{
		if (f.count[cp] == 0 && f.loop[cp] <= 23)
		{
			f.Table_Cos(cp, 15 * f.loop[cp], 160);
			f.Table_Sin(cp, 15 * f.loop[cp], 160);
			f.SquareShape(cp, 1, "40 + 1n Gantrithor", f.CosAngle[cp], f.SinAngle[cp]);
			f.SquareShape(cp, 8, "Protoss Dark Templar", f.CosAngle[cp], f.SinAngle[cp]);
			KillUnitAt(All, "40 + 1n Gantrithor", "Anywhere", cp);
			KillUnitAt(All, "Protoss Dark Templar", "Anywhere", cp);
			f.SkillWait(cp, 0);
			f.loop[cp] += 1;
		}
		else if (f.count[cp] == 0 && f.loop[cp] == 24)
		{
			f.SkillWait(cp, 0);
			f.count[cp] += 1;
			f.loop[cp] = 0;
		}
		else if (f.count[cp] == 1)
		{
			f.SquareShape(cp, 1, "60 + 1n Siege", 192, 192);
			f.SquareShape(cp, 1, "60 + 1n Siege", 128, 192);
			f.SquareShape(cp, 1, "60 + 1n Siege", 192, 128);
			f.SquareShape(cp, 1, "60 + 1n Siege", 128, 128);
			f.SquareShape(cp, 1, "40 + 1n Mojo", 192, 192);
			f.SquareShape(cp, 1, "40 + 1n Mojo", 128, 192);
			f.SquareShape(cp, 1, "40 + 1n Mojo", 192, 128);
			f.SquareShape(cp, 1, "40 + 1n Mojo", 128, 128);
			f.SquareShape(cp, 1, "40 + 1n Mojo", 192, 64);
			f.SquareShape(cp, 1, "40 + 1n Mojo", 64, 192);
			f.SquareShape(cp, 1, "40 + 1n Mojo", 128, 64);
			f.SquareShape(cp, 1, "40 + 1n Mojo", 64, 128);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 2)
		{
			f.SquareShape(cp, 1, "40 + 1n Marine", 128, 32);
			f.SquareShape(cp, 1, "40 + 1n Marine", 32, 128);
			f.SquareShape(cp, 1, "40 + 1n Marine", 128, 64);
			f.SquareShape(cp, 1, "40 + 1n Marine", 64, 128);
			f.SquareShape(cp, 1, "60 + 1n Danimoth", 96, 96);
			f.SquareShape(cp, 1, "60 + 1n Danimoth", 160, 96);
			f.SquareShape(cp, 1, "60 + 1n Danimoth", 96, 160);
			f.SquareShape(cp, 1, "60 + 1n Danimoth", 160, 160);
			f.SquareShape(cp, 1, "40 + 1n Firebat", 64, 64);
			f.SquareShape(cp, 1, "40 + 1n Firebat", 64, 0);
			f.MoveLoc(f.heroID[cp], cp, 0, 0);
			Order("40 + 1n Marine", cp, "Anywhere", Attack, f.location[cp]);
			Order("40 + 1n Firebat", cp, "Anywhere", Attack, f.location[cp]);
			Order("40 + 1n Mojo", cp, "Anywhere", Attack, f.location[cp]);
			Order("60 + 1n Danimoth", cp, "Anywhere", Attack, f.location[cp]);
			f.SkillWait(cp, 0);
			f.Voice_Routine(cp, 6);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 3 && f.loop[cp] <= 24)
		{
			f.Table_Cos(cp, 15 * f.loop[cp], 224);
			f.Table_Sin(cp, 15 * f.loop[cp], 224);
			f.SquareShape(cp, 1, "50 + 1n Battlecruiser", f.CosAngle[cp], f.SinAngle[cp]);
			KillUnitAt(All, "50 + 1n Battlecruiser", "Anywhere", cp);
			f.SkillWait(cp, 0);
			f.loop[cp] += 1;
		}
		else if (f.count[cp] == 3 && f.loop[cp] == 25)
		{
			f.SkillWait(cp, 500);
			f.count[cp] += 1;
			f.loop[cp] = 0;
		}
		else if (f.count[cp] == 4)
		{
			KillUnitAt(All, "40 + 1n Marine", "Anywhere", cp);
			KillUnitAt(All, "40 + 1n Firebat", "Anywhere", cp);
			f.SkillWait(cp, 2000);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 5)
		{
			f.Voice_Routine(cp, 7);
			KillUnitAt(All, "40 + 1n Mojo", "Anywhere", cp);
			f.SkillWait(cp, 5000);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 6)
		{
			f.Voice_Routine(cp, 8);
			KillUnitAt(All, "60 + 1n Danimoth", "Anywhere", cp);
			f.SkillWait(cp, 2500);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 7)
		{
			f.Voice_Routine(cp, 8);
			KillUnitAt(All, "60 + 1n Siege", "Anywhere", cp);
			f.SkillWait(cp, 0);
			f.count[cp] += 1;
		}
		else if (f.count[cp] == 8 
		&& Bring(cp, AtLeast, 1, "Protoss Corsair", "[Skill]UseSkill")
		&& Deaths(cp, AtLeast, f.UltimateA[cp], " `UltimateCoolTime"))
		{
			if (Switch("UiltimateSwitch", Cleared))
			{
				f.Voice_Routine(cp, 11);
				SetSwitch("UiltimateSwitch", Set);
				f.step[cp] = 240;
				f.count[cp] = 0;
				f.loop[cp] = 0;
				SetDeaths(cp, Subtract, f.UltimateA[cp], " `UltimateCoolTime");
				KillUnitAt(1, "Protoss Corsair", "[Skill]UseSkill", cp);
				SetSwitch("Recall - Chtholly", Set);
			}
			else
			{
				SetResources(CurrentPlayer, Add, 60, Gas);
				KillUnitAt(1, "Protoss Corsair", "[Skill]UseSkill", cp);
				SetDeaths(CurrentPlayer, SetTo, 999, " `SYSTEMTEXT");
				f.SkillEnd(cp);
			}
		}
		else if (f.count[cp] == 8)
		{
			f.SkillEnd(cp);
		}
	}
}