import PluginVariables as msqcvar;
import variable as v;
import func.trig as trg;
import func.sound as s;

const P_player			= PVariable();
const P_observer 		= PVariable();

const P_Next = PVariable();
const P_Wait = PVariable();

function Text(num, playerID);

function player(playerID)
{
	Text(P_player[playerID], playerID);
	P_player[playerID] = 0;
}

function observer(playerID)
{
	Text(P_observer[playerID - 128], playerID);
	P_observer[playerID - 128] = 0;
}

function main(playerID)
{
	if (playerID < 6) 	{ player(playerID); 	}
	else  			{ observer(playerID); }
	
	if (playerID < 6)
	{
		if (P_Wait[playerID] > 0)
		{ P_Wait[playerID] -= 1; }
		else if (P_Next[playerID] != 0)
		{
			P_player[playerID] 	= P_Next[playerID] + 1;
			P_observer[playerID] = P_Next[playerID] + 1;
			P_Next[playerID] = 0;
		}
	}
}

function TextDelay(playerID, wait)
{
	if (playerID < 6)
	{
		P_Next[playerID] = P_player[playerID];
		if (wait == 0)
		{ P_Next[playerID] = 0; }
		else
		{ P_Wait[playerID] = wait / 83 + 1; }
	}
}

function Text(num, playerID)
{
	switch(num)
	{
	case 1:
		PlayWAV("Teio_O.ogg");
		TextDelay(playerID, 0);
		break;
	case 2:
		PlayWAV("Teio_SCC.ogg");
		v.stb.print("\x13\x04 Tokai Teio\n");
		v.stb.print("\x13\x04 울어도 모른다. 나, 최강의 우마무스메니까\n");
		TextDelay(playerID, 0);
		break;
	case 3:
		PlayWAV("Teio_AACC.ogg");
		v.stb.print("\x13\x04 Tokai Teio\n");
		v.stb.print("\x13\x04 맞아, 기적이라도 일어나지 않는 한 불가능하겠지\n");
		TextDelay(playerID, 3720);
		break;
	case 4:
		v.stb.print("\x13\x04 Tokai Teio\n");
		v.stb.print("\x13\x04 그러니까 일으킬 꺼야, 기적을\n");
		TextDelay(playerID, 3120);
		break;
	case 5:
		v.stb.print("\x13\x04 Tokai Teio\n");
		v.stb.print("\x13\x04 내가 증명해볼게\n");
		TextDelay(playerID, 2320);
		break;
	case 6:
		v.stb.print("\x13\x04 Tokai Teio\n");
		v.stb.print("\x13\x04 나와 맥퀸은 반드시 꼭 다시 달릴 수 있을 거라는 걸\n");
		TextDelay(playerID, 0);
		break;
	case 7:
		PlayWAV("Teio_AACC+A.ogg");
		v.stb.print("\x13\x04 Tokai Teio\n");
		v.stb.print("\x13\x04 나는 거기서 누구보다 먼저 골인할게\n");
		TextDelay(playerID, 5120);
		break;
	case 8:
		v.stb.print("\x13\x04Tokai Teio\n");
		v.stb.print("\x13\x04그러니까 지켜봐줘 맥퀸\n");
		TextDelay(playerID, 0);
		break;
	case 9:
		PlayWAV("Teio_ULTIMATE3.ogg");
		v.stb.print("\x13\x04Tokai Teio\n");
		v.stb.print("\x13\x04폐가 괴로워.. 하지만 터져나가도 상관없어\n");
		TextDelay(playerID, 4300);
		break;
	case 10:
		v.stb.print("\x13\x04Tokai Teio\n");
		v.stb.print("\x13\x04다리가 무거워.. 하지만 아직 움직여\n");
		TextDelay(playerID, 3500);
		break;
	case 11:
		v.stb.print("\x13\x04Tokai Teio\n");
		v.stb.print("\x13\x04나는.. 몇번이고 좌절했었어\n");
		TextDelay(playerID, 3000);
		break;
	case 12:
		v.stb.print("\x13\x04Tokai Teio\n");
		v.stb.print("\x13\x04절대로 양보 못해\n");
		TextDelay(playerID, 2200);
		break;
	case 13:
		v.stb.print("\x13\x04Tokai Teio\n");
		v.stb.print("\x13\x04절대로.. 절대로!\n");
		TextDelay(playerID, 3800);
		break;
	case 14:
		v.stb.print("\x13\x04Tokai Teio\n");
		v.stb.print("\x13\x06이기는건 나다!!!!\n");
		TextDelay(playerID, 0);
		break;	
	case 15:
		PlayWAV("Teio_ULTIMATE4.ogg");
		TextDelay(playerID, 10500);
		break;
	case 16:
		v.stb.print("\x13\x04Tokai Teio\n");
		v.stb.print("\x13\x04승부다-----!!!!\n");
		TextDelay(playerID, 0);
		break;		
	}
}	