import PluginVariables as msqcvar;
import variable as v;
import func.trig as trg;
import func.sound as s;
import func.trigepic as epic;

var x = 0;
function main(playerID)
{	
	trg.Debuff_Stop();
	trg.Debuff_BanReturn();
	
	if (v.P_WaitMain[playerID] == 0)
	{
		MoveUnit(All,"50 + 1n Tank", playerID, "Anywhere", "[Skill]HoldPosition");
		if(v.P_CountMain[playerID] == 0)
		{
			KillUnitAt(All,"40 + 1n Mojo","Anywhere",playerID);
			KillUnitAt(All,"40 + 1n Wraith","Anywhere",playerID);
			KillUnitAt(All,"60 + 1n Danimoth","Anywhere",playerID);
			if (v.P_LoopMain[playerID] == 0)
			{
				s.CharacterVoice(7);
				trg.Shape_Edge(playerID,1,"60 + 1n High Templar",45,4,64);
				trg.Shape_Edge(playerID,1,"40 + 1n Mojo",45,4,64);
				KillUnitAt(All,"40 + 1n Mojo","Anywhere",playerID);
				//trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				//Order("40 + 1n Mojo",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				Order("60 + 1n High Templar",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(160);
			}
			else if (v.P_LoopMain[playerID] == 1)
			{
				trg.Shape_Edge(playerID,1,"50 + 1n Tank",0,6,144);
				trg.Shape_Edge(playerID,1,"40 + 1n Wraith",0,6,144);
				KillUnitAt(All,"40 + 1n Wraith","Anywhere",playerID);
				//trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				//Order("40 + 1n Wraith",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(160);
			}
			else if (v.P_LoopMain[playerID] == 2)
			{
				trg.Main_Wait(240);	
			}
			else if (v.P_LoopMain[playerID] == 3)
			{	
				KillUnitAt(All,"60 + 1n High Templar","Anywhere",playerID);
				trg.Shape_Square(playerID,1,"50 + 1n Battlecruiser",192,192);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("50 + 1n Battlecruiser",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(160);	
			}
			else if (v.P_LoopMain[playerID] <= 23)
			{	
				trg.Shape_Line(playerID,1,"60 + 1n Danimoth",0+15*v.P_LoopMain[playerID],2,256,0);
				trg.Shape_Line(playerID,1,"40 + 1n Gantrithor",0+15*v.P_LoopMain[playerID],2,256,0);
				trg.Shape_Line(playerID,1,"130 + 1n Norad",0+15*v.P_LoopMain[playerID],2,128,0);
				KillUnitAt(All,"40 + 1n Gantrithor","Anywhere",playerID);
				KillUnitAt(All,"130 + 1n Norad","Anywhere",playerID);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("60 + 1n Danimoth",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(80);	
			}
			else if(v.P_LoopMain[playerID] == 24)
			{
				trg.Main_Wait(650);	
			}
			else if(v.P_LoopMain[playerID] == 25)
			{
				for(var i = 0; i<20; i++)
				{
					MoveLocation(v.P_LocationID[playerID],"50 + 1n Tank",playerID,"Anywhere");
					RemoveUnitAt(1,"50 + 1n Tank","Anywhere",playerID);
					trg.SkillUnit(playerID,1,"60 + 1n Siege");
					trg.SkillUnit(playerID,1,"60 + 3n Siege");
					KillUnitAt(All,"60 + 3n Siege","Anywhere",playerID);
				}
				trg.Main_Wait(0);	
			}
			else if(v.P_LoopMain[playerID] == 26)
			{
				trg.Main_Wait(2150);	
			}
			else if(v.P_LoopMain[playerID] == 27)
			{
				for(var i = 0; i<20; i++)
				{
					MoveLocation(v.P_LocationID[playerID],"60 + 1n Siege",playerID,"Anywhere");
					RemoveUnitAt(1,"60 + 1n Siege","Anywhere",playerID);
					trg.SkillUnit(playerID,1,"60 + 1n Dragoon");
					trg.SkillUnit(playerID,1,"60 + 3n Siege");
					KillUnitAt(All,"60 + 3n Siege","Anywhere",playerID);
				}
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("60 + 1n Dragoon",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(100);
			}
			else if (v.P_LoopMain[playerID] == 28)
			{
				trg.Main_Wait(1000);	
			}
			else if (v.P_LoopMain[playerID] == 29)
			{
				
				trg.Shape_Square(playerID,1,"60 + 1n Danimoth",48,48);
				trg.Shape_Square(playerID,1,"60 + 1n Danimoth",80,0);
				trg.Shape_Square(playerID,1,"60 + 1n Danimoth",112,112);
				trg.Shape_Square(playerID,1,"60 + 1n Danimoth",144,0);
	
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("60 + 1n Danimoth",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				trg.Main_Wait(200);	
			}
			else if(v.P_LoopMain[playerID] == 30)
			{
				KillUnitAt(All,"60 + 1n Dragoon","Anywhere",playerID);
				KillUnitAt(All,"100 + 1n Hyperion","Anywhere",playerID);
				KillUnitAt(All,"50 + 1n Battlecruiser","Anywhere",playerID);
				trg.SkillEnd();
			}
			v.P_LoopMain[playerID] += 1;
		}
	}
}