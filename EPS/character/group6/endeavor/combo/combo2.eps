import PluginVariables as msqcvar;
import variable as v;
import func.trig as trg;
import func.sound as s;

var x = 0;
function main(playerID)
{
	trg.Debuff_Stop();
	trg.Debuff_BanReturn();
	
	if (v.P_WaitMain[playerID] == 0)
	{
		MoveUnit(All,"50 + 1n Tank", playerID, "Anywhere", "[Skill]HoldPosition");
		if (v.P_CountMain[playerID] == 0)
		{
			MoveUnit(All,"50 + 1n Tank", playerID, "Anywhere", "[Skill]HoldPosition");
			RemoveUnitAt(All,"60 + 1n Danimoth","Anywhere",playerID);
			RemoveUnitAt(All,"40 + 1n Wraith","Anywhere",playerID);
			KillUnitAt(All,"50 + 1n Battlecruiser","Anywhere",playerID);
			if (v.P_LoopMain[playerID] <= 6)
			{
				trg.Shape_Line(playerID,1,"60 + 1n Siege",0+30*x,2,384,0);
				trg.Shape_Line(playerID,1,"Protoss Dark Archon",0+30*x,2,384,0);
				KillUnitAt(All,"Protoss Dark Archon","Anywhere",playerID);
				x += 1;
				trg.Main_Wait(120);
			}
			else if (v.P_LoopMain[playerID] == 7)
			{	
				x = 0;
				trg.Main_Wait(0);
			}
			else if (v.P_LoopMain[playerID] <= 27)
			{
				trg.Shape_Line(playerID,1,"Protoss Dark Archon",0+15*x,2,600 - 30 * x,0);
				trg.Shape_Line(playerID,1,"Protoss Dark Archon",90+15*x,2,600 - 30 * x,0);
				trg.Shape_Line(playerID,1,"40 + 1n Firebat",0+15*x,2,600 - 30 * x,0);
				trg.Shape_Line(playerID,1,"40 + 1n Firebat",90+15*x,2,600 - 30 * x,0);
				trg.Shape_Line(playerID,1,"60 + 1n Danimoth",0+15*x,2,600 - 30 * x,0);
				trg.Shape_Line(playerID,1,"60 + 1n Danimoth",90+15*x,2,600 - 30 * x,0);
				KillUnitAt(All,"Protoss Dark Archon","Anywhere",playerID);
				KillUnitAt(All,"60 + 1n Danimoth","Anywhere",playerID);
				Order("60 + 1n Danimoth",playerID,"Anywhere",Move,v.P_LocationID[playerID]);
				x += 1;
				trg.Main_Wait(80);
			}
			
			else if(v.P_LoopMain[playerID] == 28)
			{
				KillUnitAt(All,"40 + 1n Firebat","Anywhere",playerID);
				trg.Shape_Dot(playerID,1,"50 + 1n Battlecruiser",0,0);
				x = 0;
				KillUnitAt(All,"50 + 1n Battlecruiser","Anywhere",playerID);
				trg.Main_Wait(80);
			}
			else if(v.P_LoopMain[playerID] <= 68)
			{
				trg.Shape_Line(playerID,1,"Protoss Dark Archon",0+15*x,2,128 + 8 * x,0);
				trg.Shape_Line(playerID,1,"Protoss Dark Archon",90+15*x,2,128 + 8 * x,0);
				trg.Shape_Line(playerID,1,"60 + 1n Archon",135+15*x,2,128 + 8 * x,0);
				trg.Shape_Line(playerID,1,"60 + 1n Archon",45+15*x,2,128 + 8 * x,0);
				trg.Shape_Line(playerID,1,"60 + 1n Danimoth",135+15*x,2,128 + 8 * x,0);
				trg.Shape_Line(playerID,1,"60 + 1n Danimoth",45+15*x,2,128 + 8 * x,0);
				trg.Shape_Line(playerID,1,"40 + 1n Wraith",0+15*x,2,128 + 8* x,0);
				trg.Shape_Line(playerID,1,"40 + 1n Wraith",90+15*x,2,128 + 8 * x,0);
				trg.MoveLoc(v.P_UnitID[playerID],playerID,0,0);
				Order("40 + 1n Wraith",playerID,"Anywhere",Attack,v.P_LocationID[playerID]);
				Order("60 + 1n Danimoth",playerID,"Anywhere",Move,v.P_LocationID[playerID]);
				KillUnitAt(All,"50 + 1n Battlecruiser","Anywhere",playerID);
				KillUnitAt(All,"Protoss Dark Archon","Anywhere",playerID);
				KillUnitAt(All,"60 + 1n Archon","Anywhere",playerID);
				x += 1;
				trg.Main_Wait(220 - 5 * x);
			}
			else if(v.P_LoopMain[playerID] == 69)
			{
				x = 0;
				KillUnitAt(All,"50 + 1n Tank","Anywhere",playerID);
				KillUnitAt(All,"60 + 1n Siege","Anywhere",playerID);
				trg.SkillEnd();
			}
			
			v.P_LoopMain[playerID] += 1;
		}
	}
}