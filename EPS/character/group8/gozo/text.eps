import PluginVariables as msqcvar;
import variable as v;
import func.trig as trg;
import func.sound as s;

const P_player			= PVariable();
const P_observer 		= PVariable();

const P_Next = PVariable();
const P_Wait = PVariable();

function Text(num, playerID);

function player(playerID)
{
	Text(P_player[playerID], playerID);
	P_player[playerID] = 0;
}

function observer(playerID)
{
	Text(P_observer[playerID - 128], playerID);
	P_observer[playerID - 128] = 0;
}

function main(playerID)
{
	if (playerID < 6) 	{ player(playerID); 	}
	else  			{ observer(playerID); }
	
	if (playerID < 6)
	{
		if (P_Wait[playerID] > 0)
		{ P_Wait[playerID] -= 1; }
		else if (P_Next[playerID] != 0)
		{
			P_player[playerID] 	= P_Next[playerID] + 1;
			P_observer[playerID] = P_Next[playerID] + 1;
			P_Next[playerID] = 0;
		}
	}
}

function TextDelay(playerID, wait)
{
	if (playerID < 6)
	{
		P_Next[playerID] = P_player[playerID];
		if (wait == 0)
		{ P_Next[playerID] = 0; }
		else
		{ P_Wait[playerID] = wait / 83 + 1; }
	}
}

function Text(num, playerID)
{
	switch(num)
	{
	case 1:
		PlayWAV("Go_o.ogg");
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04간단히 말하면.. 안 맞았어 네가 만진건 너와 나 사이의 무한이야");
		TextDelay(playerID, 0);
		break;
	case 2:
		PlayWAV("Go_sss.ogg");
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04조금 난폭한 짓좀 해볼까");
		TextDelay(playerID, 0);
		break;
	case 3:
		PlayWAV("Go_sss+aaaaa.ogg");
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04술식순전 \x0E창「蒼」\n\x13\x04술식반전 \x08혁「赫」");
		TextDelay(playerID, 8640);
		break;
	case 4:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04허식「虚式」");
		TextDelay(playerID, 4360);
		break;	
	case 5:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x10자「茈」");
		TextDelay(playerID, 0);
		break;		
	case 6:
		PlayWAV("Go_ccc.ogg");
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04하지만 주변에 동료가 얼마나 있어도.. 죽을 때는 혼자야");
		TextDelay(playerID, 0);
		break;
	case 7:
		PlayWAV("Go_ccc+aa.ogg");
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04죽어서 이긴다.\n\x13죽어도 이긴다.");
		TextDelay(playerID, 5600);
		break;	
	case 8:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04이 둘은 전혀 달라 메구미");
		TextDelay(playerID, 0);
		break;		
	case 9:
		PlayWAV("Go_aaa.ogg");
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04영역 전개");
		TextDelay(playerID, 4800);
		break;	
	case 10:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04 무량공처『無量空処』");
		TextDelay(playerID, 1840);	
	case 11:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04이곳은 무하한의 안쪽");
		TextDelay(playerID, 2400);
		break;		
	case 12:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04살아 간다고 하는 행위에 무한한 횟수의 작업을.. 강제한다.");
		TextDelay(playerID, 4960);
		break;		
	case 13:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04참 모순되는 일이지...");
		TextDelay(playerID, 1600);
		break;	
	case 14:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04모든것이 주어지면 아무 것도 하지 못한 채.. ");
		TextDelay(playerID, 3140);
		break;	
	case 15:
		v.stb.print("\x13\x04Gojo \x1FSatoru");
		v.stb.print("\x13\x04서서히 죽게된다니..");
		TextDelay(playerID, 0);
		break;		
	}
}