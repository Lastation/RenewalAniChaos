import PluginVariables as msqcvar;
import variable as v;
import func.trig as trg;
import func.sound as s;

const P_player			= PVariable();
const P_observer 		= PVariable();

const P_Next = PVariable();
const P_Wait = PVariable();

function Text(num, playerID);

function player(playerID)
{
	Text(P_player[playerID], playerID);
	P_player[playerID] = 0;
}

function observer(playerID)
{
	Text(P_observer[playerID - 128], playerID);
	P_observer[playerID - 128] = 0;
}

function main(playerID)
{
	if (playerID < 6) 	{ player(playerID); 	}
	else  			{ observer(playerID); }
	
	if (playerID < 6)
	{
		if (P_Wait[playerID] > 0)
		{ P_Wait[playerID] -= 1; }
		else if (P_Next[playerID] != 0)
		{
			P_player[playerID] 	= P_Next[playerID] + 1;
			P_observer[playerID] = P_Next[playerID] + 1;
			P_Next[playerID] = 0;
		}
	}
}

function TextDelay(playerID, wait)
{
	if (playerID < 6)
	{
		P_Next[playerID] = P_player[playerID];
		if (wait == 0)
		{ P_Next[playerID] = 0; }
		else
		{ P_Wait[playerID] = wait / 83 + 1; }
	}
}

function Text(num, playerID)
{
	switch(num)
	{
	case 1:
		PlayWAV("KatoMegumi_00.ogg");
		v.stb.print("\x13\x16Kato Megumi\n");
		v.stb.print("\x13\x04믿고 있어, 프로듀서\n");
		TextDelay(playerID, 0);
		break;
	case 5:
		PlayWAV("KatoMegumi_02.ogg");
		v.stb.print("\x13\x16Kato Megumi\n");
		v.stb.print("\x13\x04너의 새로운 이야기의 히로인 이런 느낌이었을까\n");
		TextDelay(playerID, 5800);
		break;
	case 6:
		v.stb.print("\x13\x16Kato Megumi\n");
		v.stb.print("\x13\x04너의 새로운 이야기의 데이트 이벤트는 이런 느낌이었을까\n");
		TextDelay(playerID, 0);
		break;
	case 7:
		PlayWAV("KatoMegumi_03.ogg");
		v.stb.print("\x13\x1EKato Megumi\n");
		v.stb.print("\x13\x04마치 현실에 있는 여자애를 좋아졌을 때처럼\n");
		TextDelay(playerID, 3900);
		break;	
	case 8:
		v.stb.print("\x13\x1EKato Megumi\n");
		v.stb.print("\x13\x04답답함이나 애타는 마음이나\n");
		TextDelay(playerID, 2900);
		break;
	case 9:
		v.stb.print("\x13\x1EKato Megumi\n");
		v.stb.print("\x13\x04두근거리는 마음을 느낄수 있었을까\n");
		TextDelay(playerID, 2900);
		break;
	case 10:
		v.stb.print("\x13\x1EKato Megumi\n");
		v.stb.print("\x13\x04히로인과 보내는 시간 그자체가 귀중하다고 생각할 수있는\n");
		TextDelay(playerID, 3900);
		break;
	case 11:
		v.stb.print("\x13\x1EKato Megumi\n");
		v.stb.print("\x13\x04진심으로 그 여자애를 좋아하게 될 수 있는\n");
		TextDelay(playerID, 3500);
		break;
	case 12:
		v.stb.print("\x13\x1EKato Megumi\n");
		v.stb.print("\x13\x04그런 이야기를 만들 계기가 되었을까\n");
		TextDelay(playerID, 0);
		break;
	case 13:
		PlayWAV("KatoMegumi_04.ogg");
		TextDelay(playerID, 200);
		break;
	case 14:
		v.stb.print("\x13\x1CKato Megumi\n");
		v.stb.print("\x13\x04난 포기하지 않을 거야, 토모야 군\n");
		TextDelay(playerID, 2800);
		break;
	case 15:
		v.stb.print("\x13\x1CKato Megumi\n");
		v.stb.print("\x13\x04에리리가 없어져도 카스미가오카 선배가 없어져도\n");
		TextDelay(playerID, 4200);
		break;
	case 16:
		v.stb.print("\x13\x1CKato Megumi\n");
		v.stb.print("\x13\x04블레싱 소프트웨어는 없어지지 않아\n");
		TextDelay(playerID, 2900);
		break;
	case 17:
		v.stb.print("\x13\x1CKato Megumi\n");
		v.stb.print("\x13\x04토모야 군이 있는 한\n");
		TextDelay(playerID, 0);
		break;
	case 31:
		PlayWAV("KatoMegumi_Ult.ogg");
		TextDelay(playerID, 3100);
		break;
	case 32:
		v.stb.printAt(3, "\x13\x16Kato Megumi\n");
		v.stb.printAt(5, "\x13\x04어때?\n");
		TextDelay(playerID, 1200);
		break;
	case 33:
		v.stb.printAt(3, "\x13\x16Kato Megumi\n");
		v.stb.printAt(5, "\x13\x04나는 네가 바라는 메인 히로인이 되었을까?\n");
		TextDelay(playerID, 7500);
		break;
	case 34:
		v.stb.printAt(3, "\x13\x16Kato Megumi\n");
		v.stb.printAt(5, "\x13\x04많은 유저를 위한게 아닌\n");
		TextDelay(playerID, 3700);
		break;
	case 35:
		v.stb.printAt(3, "\x13\x16Kato Megumi\n");
		v.stb.printAt(5, "\x13\x04단 한명의\n");
		TextDelay(playerID, 6800);
		break;
	case 36:
		v.stb.printAt(3, "\x13\x16Kato Megumi\n");
		v.stb.printAt(5, "\x13\x04너만을 위한 메인 히로인이 되었을까?\n");
		TextDelay(playerID, 0);
	}
}