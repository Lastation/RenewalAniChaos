import PluginVariables as msqcvar;
import variable as v;

function Property_S(playerID);
function Property_C(playerID);
function Property_A();

function PropertyText(playerID) 
{
	if (Deaths(playerID, 10, 1000, 223))		//s특 공방 적용
	{
		bwrite(0x58D2B0 + 0x207C * (7 / 46) + (playerID) * (46 - 31 * (7 / 46)) + (7 % 46), 10);
	 	bwrite(0x58D2B0 + 0x207C * (0 / 46) + (playerID) * (46 - 31 * (0 / 46)) + (0 % 46), 10);
	}	

	if (Deaths((13), (10), 10000, (223)))
	{
		v.stb.printAt(0, "\x13\x1F[S] : \x1B원거리에서 업그레이드\x04가 가능해집니다.");
		v.stb.printAt(1, "\x13\x04공격력과 방어력의 \x19초기 업그레이드\x04가 10씩 증가된 상태로 시작합니다..");
		v.stb.printAt(2, "\x13\x19팀원포함 최대 업그레이드\x04가 공격력이 4, 방어력이 1 증가합니다. [\x17Max 1\x04]");
		v.stb.printAt(3, "\n");
		v.stb.printAt(4, "\x13\x1F[C] : \x04팀원 전체에 초당 \x1B마나재생 + 5\x04를 부여합니다.");
		v.stb.printAt(5, "\x13\x04마나디스크 하나를 받고 시작합니다.");
		v.stb.printAt(6, "\n");
		v.stb.printAt(7, "\x13\x1F[A] : \x041분 마다 궁극기 게이지가 \x1910 \x04회복됩니다.");
		v.stb.printAt(8, "\x13\x1915 레벨 \x04이후 \x19O Skill \x04사용이 가능해 집니다.");
	}
}

function Property(playerID)
{
	Property_S(playerID);
	Property_C(playerID);
	Property_A();
}

function Property_S(playerID)
{
	if (playerID >= 0 && playerID <= 2 &&  bread(0x58D088 + 0x21F0 * ((0) / 46) + playerID * (46 - 31 * ((0) / 46)) + ((0) % 46)) == 60)
	{
		if (Deaths((0), (10), 1000, (223)) || Deaths((1), (10), 1000, (223)) || Deaths((2), (10), 1000, (223)))
		{
			bwrite(0x58D088 + 0x21F0 * ((7) / 46) + (0) * (46 - 31 * ((7) / 46)) + ((7) % 46), 84);
			bwrite(0x58D088 + 0x21F0 * ((7) / 46) + (1) * (46 - 31 * ((7) / 46)) + ((7) % 46), 84);
			bwrite(0x58D088 + 0x21F0 * ((7) / 46) + (2) * (46 - 31 * ((7) / 46)) + ((7) % 46), 84);
			bwrite(0x58D088 + 0x21F0 * ((0) / 46) + (0) * (46 - 31 * ((0) / 46)) + ((0) % 46), 61);
			bwrite(0x58D088 + 0x21F0 * ((0) / 46) + (1) * (46 - 31 * ((0) / 46)) + ((0) % 46), 61);
			bwrite(0x58D088 + 0x21F0 * ((0) / 46) + (2) * (46 - 31 * ((0) / 46)) + ((0) % 46), 61);
		}
		

	}
	if (playerID >= 3 && playerID <= 5 &&  bread(0x58D088 + 0x21F0 * ((0) / 46) + playerID * (46 - 31 * ((0) / 46)) + ((0) % 46)) == 60)
	{
		if (Deaths((3), (10), 1000, (223)) || Deaths((4), (10), 1000, (223)) || Deaths((5), (10), 1000, (223)))
		{
			bwrite(0x58D088 + 0x21F0 * ((7) / 46) + (3) * (46 - 31 * ((7) / 46)) + ((7) % 46), 84);
			bwrite(0x58D088 + 0x21F0 * ((7) / 46) + (4) * (46 - 31 * ((7) / 46)) + ((7) % 46), 84);
			bwrite(0x58D088 + 0x21F0 * ((7) / 46) + (5) * (46 - 31 * ((7) / 46)) + ((7) % 46), 84);
			bwrite(0x58D088 + 0x21F0 * ((0) / 46) + (3) * (46 - 31 * ((0) / 46)) + ((0) % 46), 61);
			bwrite(0x58D088 + 0x21F0 * ((0) / 46) + (4) * (46 - 31 * ((0) / 46)) + ((0) % 46), 61);
			bwrite(0x58D088 + 0x21F0 * ((0) / 46) + (5) * (46 - 31 * ((0) / 46)) + ((0) % 46), 61);
		}
	}
	
	v.P_Level[playerID] = dwread_epd(EPD(0x5822F4 + 4 * playerID));
}

function Property_C(playerID)
{

	if (playerID < 3 && Deaths(playerID, AtLeast, 13, " Item. Mana Disk 1000 / 2000") && (Deaths(P1, Exactly, 2000, " `Property")
	|| Deaths(P2, Exactly, 2000, " `Property") || Deaths(P3, Exactly, 2000, " `Property")))
	{
		SetResources(playerID, Add, 5, Gas);
	}
	if (playerID >= 3 &&  playerID < 6 && Deaths(playerID, AtLeast, 13, " Item. Mana Disk 1000 / 2000") && (Deaths(P4, Exactly, 2000, " `Property")
	|| Deaths(P5, Exactly, 2000, " `Property") || Deaths(P6, Exactly, 2000, " `Property")))
	{
		SetResources(playerID, Add, 5, Gas);
	}
}

function Property_A() 
{
	if (Deaths((13), (10), 3720, (223)))
	{
		SetDeaths((13), (8), 10, (205));
		SetDeaths((13), (7), 3000, (223));
		v.stb.print("\x13\x19A 특성 \x04효과 +10 \x1FShield");
	}
}