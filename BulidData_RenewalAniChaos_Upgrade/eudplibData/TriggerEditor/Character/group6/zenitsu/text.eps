import PluginVariables as msqcvar;
import variable as v;
import func.trig as trg;
import func.sound as s;

const P_player			= PVariable();
const P_observer 		= PVariable();

const P_Next = PVariable();
const P_Wait = PVariable();

function Text(num, playerID);

function player(playerID)
{
	Text(P_player[playerID], playerID);
	P_player[playerID] = 0;
}

function observer(playerID)
{
	Text(P_observer[playerID - 128], playerID);
	P_observer[playerID - 128] = 0;
}

function main(playerID)
{
	if (playerID < 6) 	{ player(playerID); 	}
	else  			{ observer(playerID); }
	
	if (playerID < 6)
	{
		if (P_Wait[playerID] > 0)
		{ P_Wait[playerID] -= 1; }
		else if (P_Next[playerID] != 0)
		{
			P_player[playerID] 	= P_Next[playerID] + 1;
			P_observer[playerID] = P_Next[playerID] + 1;
			P_Next[playerID] = 0;
		}
	}
}

function TextDelay(playerID, wait)
{
	if (playerID < 6)
	{
		P_Next[playerID] = P_player[playerID];
		if (wait == 0)
		{ P_Next[playerID] = 0; }
		else
		{ P_Wait[playerID] = wait / 83 + 1; }
	}
}

function Text(num, playerID)
{
	switch(num)
	{
	case 1:
		PlayWAV("Zenitsu_Unique01.ogg");
		v.stb.printAt(3, "\x13\x04Agatsuma \x1FZenitsu\n");
		v.stb.printAt(5, "\x13\x04벽력일섬");
		TextDelay(playerID, 0);
		break;
	case 2:
		PlayWAV("Zenitsu_01.ogg");
		v.stb.print("\x13\x04Agatsuma \x1FZenitsu");
		v.stb.print("\x13\x046개나 있는데 나는 하나밖에 성공 못한다고... 그걸 어떻게 알어?");
		TextDelay(playerID, 0);
		break;
	case 3:
		PlayWAV("Zenitsu_02.ogg");
		v.stb.print("\x13\x04Agatsuma \x1FZenitsu");
		v.stb.print("\x13\x04한 번 실패하고 울거나, 도망을 칠 때면..");
		TextDelay(playerID, 2300);
		break;
	case 4:
		v.stb.print("\x13\x04Agatsuma \x1FZenitsu");
		v.stb.print("\x13\x04몇번이든 끈덕지게 나를 꾸짖어줬어...");
		TextDelay(playerID, 0);
		break;
	case 5:
		PlayWAV("Zenitsu_03.ogg");
		v.stb.print("\x13\x04Agatsuma \x1FZenitsu");
		v.stb.print("\x13\x04몇번이고, 몇번이고! 질질 끌고 돌아와서는..");
		TextDelay(playerID, 4500);
		break;
	case 6:
		v.stb.print("\x13\x04Agatsuma \x1FZenitsu");
		v.stb.print("\x13\x04나를 포기하고 내치지는 않았어...!");
		TextDelay(playerID, 0);
		break;
	case 7:
		PlayWAV("Zenitsu_04.ogg");
		v.stb.print("\x13\x04Agatsuma \x1FZenitsu");
		v.stb.print("\x13\x04할부지가 가르쳐주었던 것들은..");
		TextDelay(playerID, 2000);
		break;
	case 8:
		v.stb.print("\x13\x04Agatsuma \x1FZenitsu");
		v.stb.print("\x13\x04내게 들여줬던 시간들은...");
		TextDelay(playerID, 1500);
		break;
	case 9:
		v.stb.print("\x13\x04Agatsuma \x1FZenitsu");
		v.stb.print("\x13\x04잔뜩.. 사람들한테 도움이 되는 꿈..");
		TextDelay(playerID, 0);
		break;	
	case 10:
		PlayWAV("Zenitsu_Ultimate01.ogg");
		v.stb.printAt(3, "\x13\x04Agatsuma \x1FZenitsu\n");
		v.stb.printAt(5, "\x13\x04번개의 호흡 제 1형.. 벽력일섬.. 6연!");
		TextDelay(playerID, 0);
		break;
	case 11:
		PlayWAV("Zenitsu_Ultimate02.ogg");
		TextDelay(playerID, 0);
		break;
	case 12:
		PlayWAV("Zenitsu_Unique02.ogg");
		TextDelay(playerID, 0);
		break;
	}
}