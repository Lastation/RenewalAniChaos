import variable as v;
import func.trig as trg;
import func.sound as s;

function main(playerID)
{
	trg.Debuff_Slow();
	trg.Debuff_BanReturn();
	
	if (v.P_LoopMain[playerID] > 30) 
	{
		MoveUnit(All, "80 + 1n Tom Kazansky", playerID, "Anywhere", "[Skill]HoldPosition");
		MoveUnit(All, "80 + 1n Artanis", playerID, "Anywhere", "[Skill]HoldPosition");
		MoveUnit(All, "80 + 1n Mutalisk", playerID, "Anywhere", "[Skill]HoldPosition");
	}

	if (v.P_WaitMain[playerID] == 0)
	{
		if(v.P_CountMain[playerID] == 0)
		{
			
			if (v.P_LoopMain[playerID] == 0)
			{
				trg.Shape_Dot(playerID, 1, "40 + 1n Gantrithor", 0, 0);
				trg.Shape_Dot(playerID, 8, "Protoss Dark Archon", 0, 0);
				KillUnitAt(All, "40 + 1n Gantrithor", "Anywhere", playerID);
				KillUnitAt(All, "Protoss Dark Archon", "Anywhere", playerID);
				trg.Main_Wait(0);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] == 1)
			{
				trg.Shape_Square(playerID, 1, "40 + 1n Gantrithor", 56, 56);
				trg.Shape_Square(playerID, 8, "Protoss Dark Archon", 56, 56);
				trg.Shape_Square(playerID, 1, "40 + 1n Gantrithor", 80, 0);
				trg.Shape_Square(playerID, 8, "Protoss Dark Archon", 80, 0);
				KillUnitAt(All, "40 + 1n Gantrithor", "Anywhere", playerID);
				KillUnitAt(All, "Protoss Dark Archon", "Anywhere", playerID);
				trg.Main_Wait(0);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] == 2)
			{
				trg.Shape_Square(playerID, 1, "40 + 1n Gantrithor", 114, 114);
				trg.Shape_Square(playerID, 8, "Protoss Dark Archon", 114, 114);
				trg.Shape_Square(playerID, 1, "40 + 1n Gantrithor", 160, 0);
				trg.Shape_Square(playerID, 8, "Protoss Dark Archon", 160, 0);
				KillUnitAt(All, "40 + 1n Gantrithor", "Anywhere", playerID);
				KillUnitAt(All, "Protoss Dark Archon", "Anywhere", playerID);
				trg.Main_Wait(0);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] >= 3 && v.P_LoopMain[playerID] <= 20)
			{
				trg.Table_Cos(playerID, 9 * v.P_LoopMain[playerID], 288);
				trg.Table_Sin(playerID, 9 * v.P_LoopMain[playerID], 288);
				trg.Shape_Square(playerID, 1, "80 + 1n Tom Kazansky", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
				trg.Shape_Square(playerID, 8, "Torrasque", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
				
				KillUnitAt(All, "Torrasque", "Anywhere", playerID);
				MoveLocation(v.P_LocationID[playerID], v.P_UnitID[playerID], playerID, "Anywhere");
				Order("80 + 1n Tom Kazansky", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
				trg.Main_Wait(100);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] >= 21 && v.P_LoopMain[playerID] <= 38)
			{
				trg.Table_Cos(playerID, -9 * v.P_LoopMain[playerID], 288);
				trg.Table_Sin(playerID, -9 * v.P_LoopMain[playerID], 288);
				trg.Shape_Square(playerID, 1, "80 + 1n Artanis", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
				trg.Shape_Square(playerID, 8, "50 + 1n Tank", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
				
				KillUnitAt(All, "50 + 1n Tank", "Anywhere", playerID);
				MoveLocation(v.P_LocationID[playerID], v.P_UnitID[playerID], playerID, "Anywhere");
				Order("80 + 1n Artanis", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
				trg.Main_Wait(100);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] >= 39 && v.P_LoopMain[playerID] <= 50)
			{
				trg.Table_Cos(playerID, 9 * v.P_LoopMain[playerID], 288);
				trg.Table_Sin(playerID, 9 * v.P_LoopMain[playerID], 288);
				trg.Shape_Square(playerID, 1, "80 + 1n Mutalisk", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
				trg.Shape_Square(playerID, 8, "60 + 1n Dragoon", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
				
				KillUnitAt(All, "60 + 1n Dragoon", "Anywhere", playerID);
				MoveLocation(v.P_LocationID[playerID], v.P_UnitID[playerID], playerID, "Anywhere");
				Order("80 + 1n Mutalisk", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
				trg.Main_Wait(100);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] == 51)
			{
				v.P_LoopMain[playerID] = 0;
				v.P_CountMain[playerID] += 1;
			}
		}
		else if(v.P_CountMain[playerID] == 1)
		{
			if (v.P_LoopMain[playerID] == 0)
			{
				if (playerID < 3)
				{
					GiveUnits(All, "80 + 1n Tom Kazansky", CurrentPlayer, "Anywhere", P7);
					GiveUnits(All, "80 + 1n Artanis", CurrentPlayer, "Anywhere", P7);
					GiveUnits(All, "80 + 1n Mutalisk", CurrentPlayer, "Anywhere", P7);
				}
				else
				{
					GiveUnits(All, "80 + 1n Tom Kazansky", CurrentPlayer, "Anywhere", P8);
					GiveUnits(All, "80 + 1n Artanis", CurrentPlayer, "Anywhere", P8);
					GiveUnits(All, "80 + 1n Mutalisk", CurrentPlayer, "Anywhere", P8);
				}
				trg.Main_Wait(0);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] == 1)
			{
				s.CharacterVoice(6);
				SetSwitch("JunkYardDog", Set);
				trg.Main_Wait(1200);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] == 2)
			{
				if (playerID < 3)
				{
					GiveUnits(All, "80 + 1n Tom Kazansky", P7, "Anywhere", CurrentPlayer);
					GiveUnits(All, "80 + 1n Artanis", P7, "Anywhere", CurrentPlayer);
					GiveUnits(All, "80 + 1n Mutalisk", P7, "Anywhere", CurrentPlayer);
				}
				else
				{
					GiveUnits(All, "80 + 1n Tom Kazansky", P8, "Anywhere", CurrentPlayer);
					GiveUnits(All, "80 + 1n Artanis", P8, "Anywhere", CurrentPlayer);
					GiveUnits(All, "80 + 1n Mutalisk", P8, "Anywhere", CurrentPlayer);
				}
				SetSwitch("JunkYardDog", Clear);
				trg.Main_Wait(0);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] == 3)
			{
				MoveLocation(v.P_LocationID[playerID], v.P_UnitID[playerID], playerID, "Anywhere");
				Order("80 + 1n Tom Kazansky", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
				Order("80 + 1n Artanis", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
				Order("80 + 1n Mutalisk", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
				trg.Main_Wait(2600);
				v.P_LoopMain[playerID] = 0;
				v.P_CountMain[playerID] += 1;
			}
		}
		else if (v.P_CountMain[playerID] == 2)
		{
			trg.Shape_NxNSquare(playerID, 1, "130 + 1n Norad", 5, 64);
			trg.Shape_Square(playerID, 1, "130 + 1n Norad", 192, 0);
			trg.Shape_Square(playerID, 1, "130 + 1n Norad", 192, 128);
			trg.Shape_Square(playerID, 1, "130 + 1n Norad", 192, -128);
			trg.Shape_Square(playerID, 1, "130 + 1n Norad", 256, 0);
			trg.Shape_Square(playerID, 1, "130 + 1n Norad", 320, 0);
			MoveLocation(v.P_LocationID[playerID], v.P_UnitID[playerID], playerID, "Anywhere");
			Order("130 + 1n Norad", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
			trg.Main_Wait(1200);
			v.P_CountMain[playerID] += 1;
		}
		else if (v.P_CountMain[playerID] == 3)
		{
			KillUnitAt(All, "130 + 1n Norad", "Anywhere", CurrentPlayer);
			KillUnitAt(All, "80 + 1n Tom Kazansky", "Anywhere", CurrentPlayer);
			KillUnitAt(All, "80 + 1n Artanis", "Anywhere", CurrentPlayer);
			KillUnitAt(All, "80 + 1n Mutalisk", "Anywhere", CurrentPlayer);
			SetSwitch("UiltimateSwitch", Clear);
			trg.SkillEnd();
		}
	}
}