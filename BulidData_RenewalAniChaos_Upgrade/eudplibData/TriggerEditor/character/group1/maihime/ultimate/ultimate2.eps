import variable as v;
import func.trig as trg;

function main(playerID)
{
	trg.Debuff_Stop();
	trg.Buff_ShieldFix(1);
	
	if (v.P_WaitMain[playerID] == 0)
	{
		if (v.P_CountMain[playerID] == 0)
		{
			if (v.P_LoopMain[playerID] < 15)
			{
				var Degree = 6 * v.P_LoopMain[playerID];
				trg.Table_Cos(playerID, Degree, 64);
				trg.Table_Sin(playerID, Degree, 64);
				
				trg.Shape_Square(playerID, 1, "40 + 1n Zealot", v.P_AngleCos[playerID], v.P_AngleSin[playerID]);
				trg.Shape_Square(playerID, 1, "40 + 1n Zealot", v.P_AngleCos[playerID] * 2, v.P_AngleSin[playerID] * 2);
				trg.Shape_Square(playerID, 1, "40 + 1n Zealot", v.P_AngleCos[playerID] * 3, v.P_AngleSin[playerID] * 3);
				trg.Shape_Square(playerID, 1, "60 + 1n Siege", v.P_AngleCos[playerID] * 4, v.P_AngleSin[playerID] * 4);
				trg.Shape_Square(playerID, 1, "60 + 1n Siege", v.P_AngleCos[playerID] * 5, v.P_AngleSin[playerID] * 5);
				trg.Shape_Square(playerID, 1, "60 + 1n Siege", v.P_AngleCos[playerID] * 6, v.P_AngleSin[playerID] * 6);
				trg.Shape_Double(playerID, 1, "80 + 1n Artanis", v.P_AngleCos[playerID] * 4, -v.P_AngleSin[playerID] * 4);
				trg.Shape_Square(playerID, 1, "80 + 1n Tom Kazansky", v.P_AngleCos[playerID] * 4, v.P_AngleSin[playerID] * 4);
				trg.Shape_Square(playerID, 1, "80 + 1n Artanis", v.P_AngleCos[playerID] * 5, v.P_AngleSin[playerID] * 5);
				trg.Shape_Double(playerID, 1, "80 + 1n Tom Kazansky", v.P_AngleCos[playerID] * 5, -v.P_AngleSin[playerID] * 5);
				trg.Shape_Double(playerID, 1, "80 + 1n Artanis", v.P_AngleCos[playerID] * 6, -v.P_AngleSin[playerID] * 6);
				trg.Shape_Square(playerID, 1, "80 + 1n Tom Kazansky", v.P_AngleCos[playerID] * 6, v.P_AngleSin[playerID] * 6);
				MoveLocation(v.P_LocationID[playerID], v.P_UnitID[playerID], playerID, "Anywhere");
				Order("80 + 1n Artanis", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
				Order("80 + 1n Tom Kazansky", playerID, "Anywhere", Attack, v.P_LocationID[playerID]);
				KillUnitAt(All, "40 + 1n Zealot", "Anywhere", playerID);
				trg.Main_Wait(30);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] == 15)
			{
				trg.Main_Wait(2800);
				v.P_LoopMain[playerID] += 1;
			}
			else if (v.P_LoopMain[playerID] == 16)
			{
				RemoveUnitAt(All, "80 + 1n Artanis", "Anywhere", playerID);
				RemoveUnitAt(All, "80 + 1n Tom Kazansky", "Anywhere", playerID);
				KillUnitAt(All, "60 + 1n Siege", "Anywhere", playerID);
				SetSwitch("Recall - MaiHime", Clear);
				SetSwitch("UiltimateSwitch", Clear);
				trg.SkillEnd();
			}
		}
	}
}