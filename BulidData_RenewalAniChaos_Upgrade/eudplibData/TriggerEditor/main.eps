import variable as v;
import func.trig as trg;
import func.sound as sound;
import system.getUnitID as unitID;
import system.select as select;
import character.marge as marge;

const stb = StringBuffer();

function onPluginStart() 	// 초기화 함수
{
}

function beforeTriggerExec() 
{
	randomize();
	
	// Player Loop
	foreach(playerID : EUDLoopPlayer())
	{
		setcurpl(playerID);
		
		unitID.getUnitID(playerID);
		select.SelectText(playerID);
		marge.main(playerID);
		sound.OldVoicemain();
		sound.main(playerID);
		
		if (v.P_HeroID[playerID] != dwread_epd(EPD(0x58A364 + 48 * 172 + 4 * playerID)))
      	 	{ v.P_HeroID[playerID] = dwread_epd(EPD(0x58A364 + 48 * 172 + 4 * playerID)); }
      	 	
		MuteUnitSpeech();
	}
	
	// Observer Loop
	foreach (observerID : EUDLoopRange(128, 132))
	{
		setcurpl(observerID);
		MuteUnitSpeech();
		sound.OldVoicemain();
		sound.main(observerID);
	}
}